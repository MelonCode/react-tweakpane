import{a as x,c as g,R as El}from"./react-590fa3b4.js";import{C as Vl,O as Sl,P as Ol,S as Ml,a as xl,V as $l,b as kl,c as Tl}from"./three-6ff23636.js";import{t as jl}from"./tweakpane-f8680146.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var ua={exports:{}},zr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rl=x,Al=Symbol.for("react.element"),Nl=Symbol.for("react.fragment"),Ll=Object.prototype.hasOwnProperty,Bl=Rl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fl={key:!0,ref:!0,__self:!0,__source:!0};function pa(r,e,t){var n,i={},o=null,a=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Ll.call(e,n)&&!Fl.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Al,type:r,key:o,ref:a,props:i,_owner:Bl.current}}zr.Fragment=Nl;zr.jsx=pa;zr.jsxs=pa;ua.exports=zr;var z=ua.exports,Bn={},se={};Object.defineProperty(se,"__esModule",{value:!0});se.BladeApi=void 0;var Dl=function(){function r(e){this.controller_=e}return Object.defineProperty(r.prototype,"element",{get:function(){return this.controller_.view.element},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disabled",{get:function(){return this.controller_.viewProps.get("disabled")},set:function(e){this.controller_.viewProps.set("disabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hidden",{get:function(){return this.controller_.viewProps.get("hidden")},set:function(e){this.controller_.viewProps.set("hidden",e)},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){this.controller_.viewProps.set("disposed",!0)},r}();se.BladeApi=Dl;var da={};Object.defineProperty(da,"__esModule",{value:!0});var ca={};Object.defineProperty(ca,"__esModule",{value:!0});var I={},Wr=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(I,"__esModule",{value:!0});I.TpTabSelectEvent=I.TpFoldEvent=I.TpUpdateEvent=I.TpChangeEvent=I.TpEvent=void 0;var St=function(){function r(e){this.target=e}return r}();I.TpEvent=St;var Il=function(r){Wr(e,r);function e(t,n,i,o){var a=r.call(this,t)||this;return a.value=n,a.presetKey=i,a.last=o??!0,a}return e}(St);I.TpChangeEvent=Il;var Kl=function(r){Wr(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.value=n,o.presetKey=i,o}return e}(St);I.TpUpdateEvent=Kl;var Ul=function(r){Wr(e,r);function e(t,n){var i=r.call(this,t)||this;return i.expanded=n,i}return e}(St);I.TpFoldEvent=Ul;var Hl=function(r){Wr(e,r);function e(t,n){var i=r.call(this,t)||this;return i.index=n,i}return e}(St);I.TpTabSelectEvent=Hl;var Ot={},Z={},E={};Object.defineProperty(E,"__esModule",{value:!0});E.isPropertyWritable=E.deepEqualsArray=E.isEmpty=E.forceCast=void 0;function Gl(r){return r}E.forceCast=Gl;function ql(r){return r==null}E.isEmpty=ql;function zl(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}E.deepEqualsArray=zl;function Wl(r,e){var t=r;do{var n=Object.getOwnPropertyDescriptor(t,e);if(n&&(n.set!==void 0||n.writable===!0))return!0;t=Object.getPrototypeOf(t)}while(t!==null);return!1}E.isPropertyWritable=Wl;Object.defineProperty(Z,"__esModule",{value:!0});Z.TpError=void 0;var Yl=E,Xl={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(r){return"Invalid parameters for '".concat(r.name,"'")},nomatchingcontroller:function(r){return"No matching controller for '".concat(r.key,"'")},nomatchingview:function(r){return"No matching view for '".concat(JSON.stringify(r.params),"'")},notbindable:function(){return"Value is not bindable"},propertynotfound:function(r){return"Property '".concat(r.name,"' not found")},shouldneverhappen:function(){return"This error should never happen"}},Jl=function(){function r(e){var t;this.message=(t=Xl[e.type]((0,Yl.forceCast)(e.context)))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}return r.alreadyDisposed=function(){return new r({type:"alreadydisposed"})},r.notBindable=function(){return new r({type:"notbindable"})},r.propertyNotFound=function(e){return new r({type:"propertynotfound",context:{name:e}})},r.shouldNeverHappen=function(){return new r({type:"shouldneverhappen"})},r}();Z.TpError=Jl;Object.defineProperty(Ot,"__esModule",{value:!0});Ot.BindingTarget=void 0;var $i=Z,Zl=function(){function r(e,t,n){this.obj_=e,this.key_=t,this.presetKey_=n??t}return r.isBindable=function(e){return!(e===null||typeof e!="object"&&typeof e!="function")},Object.defineProperty(r.prototype,"key",{get:function(){return this.key_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"presetKey",{get:function(){return this.presetKey_},enumerable:!1,configurable:!0}),r.prototype.read=function(){return this.obj_[this.key_]},r.prototype.write=function(e){this.obj_[this.key_]=e},r.prototype.writeProperty=function(e,t){var n=this.read();if(!r.isBindable(n))throw $i.TpError.notBindable();if(!(e in n))throw $i.TpError.propertyNotFound(e);n[e]=t},r}();Ot.BindingTarget=Zl;var Mt={},Ql=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mt,"__esModule",{value:!0});Mt.ButtonApi=void 0;var es=se,ts=I,rs=function(r){Ql(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){var t;return(t=this.controller_.valueController.props.get("title"))!==null&&t!==void 0?t:""},set:function(t){this.controller_.valueController.props.set("title",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var i=this,o=n.bind(this),a=this.controller_.valueController.emitter;return a.on(t,function(){o(new ts.TpEvent(i))}),this},e}(es.BladeApi);Mt.ButtonApi=rs;var xt={},N={};Object.defineProperty(N,"__esModule",{value:!0});N.Emitter=void 0;var ns=function(){function r(){this.observers_={}}return r.prototype.on=function(e,t){var n=this.observers_[e];return n||(n=this.observers_[e]=[]),n.push({handler:t}),this},r.prototype.off=function(e,t){var n=this.observers_[e];return n&&(this.observers_[e]=n.filter(function(i){return i.handler!==t})),this},r.prototype.emit=function(e,t){var n=this.observers_[e];n&&n.forEach(function(i){i.handler(t)})},r}();N.Emitter=ns;var $t={},O={};Object.defineProperty(O,"__esModule",{value:!0});O.ClassName=void 0;var is="tp";function os(r){var e=function(t,n){return[is,"-",r,"v",t?"_".concat(t):"",n?"-".concat(n):""].join("")};return e}O.ClassName=os;var J={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.bindValueMap=D.bindValue=void 0;function as(r,e){return function(t){return e(r(t))}}function ls(r){return r.rawValue}function va(r,e){r.emitter.on("change",as(ls,e)),e(r.rawValue)}D.bindValue=va;function ss(r,e,t){va(r.value(e),t)}D.bindValueMap=ss;Object.defineProperty(J,"__esModule",{value:!0});J.bindValueToTextContent=J.valueToClassName=void 0;var us=D;function ps(r,e,t){t?r.classList.add(e):r.classList.remove(e)}function ds(r,e){return function(t){ps(r,e,t)}}J.valueToClassName=ds;function cs(r,e){(0,us.bindValue)(r,function(t){e.textContent=t??""})}J.bindValueToTextContent=cs;Object.defineProperty($t,"__esModule",{value:!0});$t.ButtonView=void 0;var vs=O,hs=J,Fn=(0,vs.ClassName)("btn"),fs=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(Fn()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("button");n.classList.add(Fn("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;var i=e.createElement("div");i.classList.add(Fn("t")),(0,hs.bindValueToTextContent)(t.props.value("title"),i),this.buttonElement.appendChild(i)}return r}();$t.ButtonView=fs;Object.defineProperty(xt,"__esModule",{value:!0});xt.ButtonController=void 0;var _s=N,ms=$t,bs=function(){function r(e,t){this.emitter=new _s.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new ms.ButtonView(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return r.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},r}();xt.ButtonController=bs;var kt={},T={},G={},Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.BoundValue=void 0;var ws=N,gs=function(){function r(e,t){var n;this.constraint_=t==null?void 0:t.constraint,this.equals_=(n=t==null?void 0:t.equals)!==null&&n!==void 0?n:function(i,o){return i===o},this.emitter=new ws.Emitter,this.rawValue_=e}return Object.defineProperty(r.prototype,"constraint",{get:function(){return this.constraint_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rawValue",{get:function(){return this.rawValue_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),r.prototype.setRawValue=function(e,t){var n=t??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_,a=!this.equals_(o,i);!a&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,previousRawValue:o,rawValue:i,sender:this}))},r}();Yr.BoundValue=gs;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.PrimitiveValue=void 0;var ys=N,Cs=function(){function r(e){this.emitter=new ys.Emitter,this.value_=e}return Object.defineProperty(r.prototype,"rawValue",{get:function(){return this.value_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),r.prototype.setRawValue=function(e,t){var n=t??{forceEmit:!1,last:!0},i=this.value_;i===e&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:this.value_,sender:this}))},r}();Xr.PrimitiveValue=Cs;Object.defineProperty(G,"__esModule",{value:!0});G.createValue=void 0;var Ps=Yr,Es=Xr;function Vs(r,e){var t=e==null?void 0:e.constraint,n=e==null?void 0:e.equals;return!t&&!n?new Es.PrimitiveValue(r):new Ps.BoundValue(r,e)}G.createValue=Vs;Object.defineProperty(T,"__esModule",{value:!0});T.ValueMap=void 0;var Ss=N,Os=G,Ms=function(){function r(e){var t=this;this.emitter=new Ss.Emitter,this.valMap_=e;var n=function(a){var l=i.valMap_[a];l.emitter.on("change",function(){t.emitter.emit("change",{key:a,sender:t})})},i=this;for(var o in this.valMap_)n(o)}return r.createCore=function(e){var t=Object.keys(e);return t.reduce(function(n,i){var o;return Object.assign(n,(o={},o[i]=(0,Os.createValue)(e[i]),o))},{})},r.fromObject=function(e){var t=this.createCore(e);return new r(t)},r.prototype.get=function(e){return this.valMap_[e].rawValue},r.prototype.set=function(e,t){this.valMap_[e].rawValue=t},r.prototype.value=function(e){return this.valMap_[e]},r}();T.ValueMap=Ms;var L={};(function(r){var e=g&&g.__assign||function(){return e=Object.assign||function(m){for(var c,d=1,w=arguments.length;d<w;d++){c=arguments[d];for(var C in c)Object.prototype.hasOwnProperty.call(c,C)&&(m[C]=c[C])}return m},e.apply(this,arguments)},t=g&&g.__spreadArray||function(m,c,d){if(d||arguments.length===2)for(var w=0,C=c.length,P;w<C;w++)(P||!(w in c))&&(P||(P=Array.prototype.slice.call(c,0,w)),P[w]=c[w]);return m.concat(P||Array.prototype.slice.call(c))};Object.defineProperty(r,"__esModule",{value:!0}),r.parseParams=r.ParamsParsers=void 0;var n=E;function i(m,c){var d=Object.keys(c),w=d.reduce(function(C,P){var f;if(C!==void 0){var b=c[P],_=b(m[P]);return _.succeeded?e(e({},C),(f={},f[P]=_.value,f)):void 0}},{});return(0,n.forceCast)(w)}function o(m,c){return m.reduce(function(d,w){if(d!==void 0){var C=c(w);if(!(!C.succeeded||C.value===void 0))return t(t([],d,!0),[C.value],!1)}},[])}function a(m){return m===null?!1:typeof m=="object"}function l(m){return function(c){return function(d){if(!c&&d===void 0)return{succeeded:!1,value:void 0};if(c&&d===void 0)return{succeeded:!0,value:void 0};var w=m(d);return w!==void 0?{succeeded:!0,value:w}:{succeeded:!1,value:void 0}}}}function s(m){return{custom:function(c){return l(c)(m)},boolean:l(function(c){return typeof c=="boolean"?c:void 0})(m),number:l(function(c){return typeof c=="number"?c:void 0})(m),string:l(function(c){return typeof c=="string"?c:void 0})(m),function:l(function(c){return typeof c=="function"?c:void 0})(m),constant:function(c){return l(function(d){return d===c?c:void 0})(m)},raw:l(function(c){return c})(m),object:function(c){return l(function(d){if(a(d))return i(d,c)})(m)},array:function(c){return l(function(d){if(Array.isArray(d))return o(d,c)})(m)}}}r.ParamsParsers={optional:s(!0),required:s(!1)};function p(m,c){var d=r.ParamsParsers.required.object(c)(m);return d.succeeded?d.value:void 0}r.parseParams=p})(L);var Le={},ce={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.warnMissing=ye.warnDeprecation=void 0;function xs(r){var e;console.warn(["".concat(r.name," is deprecated."),r.alternative?"use ".concat(r.alternative," instead."):"",(e=r.postscript)!==null&&e!==void 0?e:""].join(" "))}ye.warnDeprecation=xs;function $s(r){console.warn(["Missing '".concat(r.key,"' of ").concat(r.target," in ").concat(r.place,"."),"Please rebuild plugins with the latest core package."].join(" "))}ye.warnMissing=$s;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.disposeElement=void 0;function ks(r){return r&&r.parentElement&&r.parentElement.removeChild(r),null}Jr.disposeElement=ks;var ve={},Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.ReadonlyValue=void 0;var Ts=function(){function r(e){this.value_=e}return r.create=function(e){return[new r(e),function(t,n){e.setRawValue(t,n)}]},Object.defineProperty(r.prototype,"emitter",{get:function(){return this.value_.emitter},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rawValue",{get:function(){return this.value_.rawValue},enumerable:!1,configurable:!0}),r}();Zr.ReadonlyValue=Ts;var js=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ve,"__esModule",{value:!0});ve.ViewProps=void 0;var Rs=O,As=J,yr=D,Ns=Zr,ki=T,Ls=G,Bs=(0,Rs.ClassName)("");function Ti(r,e){return(0,As.valueToClassName)(r,Bs(void 0,e))}var Fs=function(r){js(e,r);function e(t){var n,i=this,o;return i=r.call(this,t)||this,i.onDisabledChange_=i.onDisabledChange_.bind(i),i.onParentChange_=i.onParentChange_.bind(i),i.onParentGlobalDisabledChange_=i.onParentGlobalDisabledChange_.bind(i),n=Ns.ReadonlyValue.create((0,Ls.createValue)(i.getGlobalDisabled_())),i.globalDisabled_=n[0],i.setGlobalDisabled_=n[1],i.value("disabled").emitter.on("change",i.onDisabledChange_),i.value("parent").emitter.on("change",i.onParentChange_),(o=i.get("parent"))===null||o===void 0||o.globalDisabled.emitter.on("change",i.onParentGlobalDisabledChange_),i}return e.create=function(t){var n,i,o,a=t??{};return new e(ki.ValueMap.createCore({disabled:(n=a.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(i=a.hidden)!==null&&i!==void 0?i:!1,parent:(o=a.parent)!==null&&o!==void 0?o:null}))},Object.defineProperty(e.prototype,"globalDisabled",{get:function(){return this.globalDisabled_},enumerable:!1,configurable:!0}),e.prototype.bindClassModifiers=function(t){(0,yr.bindValue)(this.globalDisabled_,Ti(t,"disabled")),(0,yr.bindValueMap)(this,"hidden",Ti(t,"hidden"))},e.prototype.bindDisabled=function(t){(0,yr.bindValue)(this.globalDisabled_,function(n){t.disabled=n})},e.prototype.bindTabIndex=function(t){(0,yr.bindValue)(this.globalDisabled_,function(n){t.tabIndex=n?-1:0})},e.prototype.handleDispose=function(t){this.value("disposed").emitter.on("change",function(n){n&&t()})},e.prototype.getGlobalDisabled_=function(){var t=this.get("parent"),n=t?t.globalDisabled.rawValue:!1;return n||this.get("disabled")},e.prototype.updateGlobalDisabled_=function(){this.setGlobalDisabled_(this.getGlobalDisabled_())},e.prototype.onDisabledChange_=function(){this.updateGlobalDisabled_()},e.prototype.onParentGlobalDisabledChange_=function(){this.updateGlobalDisabled_()},e.prototype.onParentChange_=function(t){var n,i=t.previousRawValue;i==null||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()},e}(ki.ValueMap);ve.ViewProps=Fs;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.getAllBladePositions=void 0;function Ds(){return["veryfirst","first","last","verylast"]}Tt.getAllBladePositions=Ds;Object.defineProperty(ce,"__esModule",{value:!0});ce.BladeController=void 0;var Is=ye,Ks=Jr,Us=ve,Hs=O,Gs=Tt,ji=(0,Hs.ClassName)(""),Ri={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},qs=function(){function r(e){var t=this;this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;var n=this.view.element;this.blade.value("positions").emitter.on("change",function(){(0,Gs.getAllBladePositions)().forEach(function(i){n.classList.remove(ji(void 0,Ri[i]))}),t.blade.get("positions").forEach(function(i){n.classList.add(ji(void 0,Ri[i]))})}),this.viewProps.handleDispose(function(){(0,Ks.disposeElement)(n)})}return Object.defineProperty(r.prototype,"parent",{get:function(){return this.parent_},set:function(e){if(this.parent_=e,!("parent"in this.viewProps.valMap_)){(0,Is.warnMissing)({key:"parent",target:Us.ViewProps.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)},enumerable:!1,configurable:!0}),r}();ce.BladeController=qs;var Qe={},U={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.findNextTarget=r.indexOfChildElement=r.removeChildNodes=r.removeChildElements=r.removeElement=r.insertElementAt=r.createSvgIconElement=r.getCanvasContext=r.getWindowDocument=r.supportsTouch=r.disableTransitionTemporarily=r.forceReflow=r.SVG_NS=void 0;var e=E;r.SVG_NS="http://www.w3.org/2000/svg";function t(f){f.offsetHeight}r.forceReflow=t;function n(f,b){var _=f.style.transition;f.style.transition="none",b(),f.style.transition=_}r.disableTransitionTemporarily=n;function i(f){return f.ontouchstart!==void 0}r.supportsTouch=i;function o(){return globalThis}function a(){var f=(0,e.forceCast)(o());return f.document}r.getWindowDocument=a;function l(f){var b=f.ownerDocument.defaultView;if(!b)return null;var _="document"in b;return _?f.getContext("2d",{willReadFrequently:!0}):null}r.getCanvasContext=l;var s={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function p(f,b){var _=f.createElementNS(r.SVG_NS,"svg");return _.innerHTML=s[b],_}r.createSvgIconElement=p;function m(f,b,_){f.insertBefore(b,f.children[_])}r.insertElementAt=m;function c(f){f.parentElement&&f.parentElement.removeChild(f)}r.removeElement=c;function d(f){for(;f.children.length>0;)f.removeChild(f.children[0])}r.removeChildElements=d;function w(f){for(;f.childNodes.length>0;)f.removeChild(f.childNodes[0])}r.removeChildNodes=w;function C(f){var b=f.parentElement;if(!b)return-1;var _=Array.prototype.slice.call(b.children);return _.indexOf(f)}r.indexOfChildElement=C;function P(f){return f.relatedTarget?(0,e.forceCast)(f.relatedTarget):"explicitOriginalTarget"in f?f.explicitOriginalTarget:null}r.findNextTarget=P})(U);Object.defineProperty(Qe,"__esModule",{value:!0});Qe.LabelView=void 0;var zs=U,Ws=D,Ys=O,Xs=E,pt=(0,Ys.ClassName)("lbl");function Js(r,e){var t=r.createDocumentFragment(),n=e.split(`
`).map(function(i){return r.createTextNode(i)});return n.forEach(function(i,o){o>0&&t.appendChild(r.createElement("br")),t.appendChild(i)}),t}var Zs=function(){function r(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(pt()),t.viewProps.bindClassModifiers(this.element);var i=e.createElement("div");i.classList.add(pt("l")),(0,Ws.bindValueMap)(t.props,"label",function(a){(0,Xs.isEmpty)(a)?n.element.classList.add(pt(void 0,"nol")):(n.element.classList.remove(pt(void 0,"nol")),(0,zs.removeChildNodes)(i),i.appendChild(Js(e,a)))}),this.element.appendChild(i),this.labelElement=i;var o=e.createElement("div");o.classList.add(pt("v")),this.element.appendChild(o),this.valueElement=o}return r}();Qe.LabelView=Zs;var Qs=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ir=g&&g.__assign||function(){return Ir=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ir.apply(this,arguments)};Object.defineProperty(Le,"__esModule",{value:!0});Le.LabelController=void 0;var eu=ce,tu=Qe,ru=function(r){Qs(e,r);function e(t,n){var i=this,o=n.valueController.viewProps;return i=r.call(this,Ir(Ir({},n),{view:new tu.LabelView(t,{props:n.props,viewProps:o}),viewProps:o}))||this,i.props=n.props,i.valueController=n.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return e}(eu.BladeController);Le.LabelController=ru;Object.defineProperty(kt,"__esModule",{value:!0});kt.ButtonBladePlugin=void 0;var Ai=T,Ni=L,Li=Le,nu=Mt,Bi=xt;kt.ButtonBladePlugin={id:"button",type:"blade",accept:function(r){var e=Ni.ParamsParsers,t=(0,Ni.parseParams)(r,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return t?{params:t}:null},controller:function(r){return new Li.LabelController(r.document,{blade:r.blade,props:Ai.ValueMap.fromObject({label:r.params.label}),valueController:new Bi.ButtonController(r.document,{props:Ai.ValueMap.fromObject({title:r.params.title}),viewProps:r.viewProps})})},api:function(r){return!(r.controller instanceof Li.LabelController)||!(r.controller.valueController instanceof Bi.ButtonController)?null:new nu.ButtonApi(r.controller)}};var Be={},iu=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Be,"__esModule",{value:!0});Be.ValueBladeController=void 0;var ou=ce,au=function(r){iu(e,r);function e(t){var n=r.call(this,t)||this;return n.value=t.value,n}return e}(ou.BladeController);Be.ValueBladeController=au;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.createBlade=void 0;var lu=T,su=G,uu=E;function pu(){return new lu.ValueMap({positions:(0,su.createValue)([],{equals:uu.deepEqualsArray})})}Ve.createBlade=pu;var W={},du=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(W,"__esModule",{value:!0});W.bindFoldable=W.getFoldableStyleHeight=W.getFoldableStyleExpanded=W.createFoldable=W.Foldable=void 0;var Fr=U,Fi=D,Di=T,ha=E,fa=function(r){du(e,r);function e(t){return r.call(this,t)||this}return e.create=function(t){var n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=Di.ValueMap.createCore(n);return new e(i)},Object.defineProperty(e.prototype,"styleExpanded",{get:function(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleHeight",{get:function(){if(!this.styleExpanded)return"0";var t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!(0,ha.isEmpty)(t)?"".concat(t,"px"):"auto"},enumerable:!1,configurable:!0}),e.prototype.bindExpandedClass=function(t,n){var i=this,o=function(){var a=i.styleExpanded;a?t.classList.add(n):t.classList.remove(n)};(0,Fi.bindValueMap)(this,"expanded",o),(0,Fi.bindValueMap)(this,"temporaryExpanded",o)},e.prototype.cleanUpTransition=function(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)},e}(Di.ValueMap);W.Foldable=fa;function cu(r){return fa.create(r)}W.createFoldable=cu;function vu(r,e){var t=0;return(0,Fr.disableTransitionTemporarily)(e,function(){r.set("expandedHeight",null),r.set("temporaryExpanded",!0),(0,Fr.forceReflow)(e),t=e.clientHeight,r.set("temporaryExpanded",null),(0,Fr.forceReflow)(e)}),t}function hu(r){return r.styleExpanded}W.getFoldableStyleExpanded=hu;function fu(r){return r.styleHeight}W.getFoldableStyleHeight=fu;function Ii(r,e){e.style.height=r.styleHeight}function _u(r,e){r.value("expanded").emitter.on("beforechange",function(){if(r.set("completed",!1),(0,ha.isEmpty)(r.get("expandedHeight"))){var t=vu(r,e);t>0&&r.set("expandedHeight",t)}r.set("shouldFixHeight",!0),(0,Fr.forceReflow)(e)}),r.emitter.on("change",function(){Ii(r,e)}),Ii(r,e),e.addEventListener("transitionend",function(t){t.propertyName==="height"&&r.cleanUpTransition()})}W.bindFoldable=_u;var jt={},et={},mu=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(et,"__esModule",{value:!0});et.RackLikeApi=void 0;var bu=se,wu=function(r){mu(e,r);function e(t,n){var i=r.call(this,t)||this;return i.rackApi_=n,i}return e}(bu.BladeApi);et.RackLikeApi=wu;var Ce={},oe={},le=g&&g.__assign||function(){return le=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},le.apply(this,arguments)};Object.defineProperty(oe,"__esModule",{value:!0});oe.addTabAsBlade=oe.addSeparatorAsBlade=oe.addFolderAsBlade=oe.addButtonAsBlade=void 0;function gu(r,e){return r.addBlade(le(le({},e),{view:"button"}))}oe.addButtonAsBlade=gu;function yu(r,e){return r.addBlade(le(le({},e),{view:"folder"}))}oe.addFolderAsBlade=yu;function Cu(r,e){var t=e??{};return r.addBlade(le(le({},t),{view:"separator"}))}oe.addSeparatorAsBlade=Cu;function Pu(r,e){return r.addBlade(le(le({},e),{view:"tab"}))}oe.addTabAsBlade=Pu;var tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.NestedOrderedSet=void 0;var Eu=N,Vu=Z,Su=function(){function r(e){this.emitter=new Eu.Emitter,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}return Object.defineProperty(r.prototype,"items",{get:function(){return this.items_},enumerable:!1,configurable:!0}),r.prototype.allItems=function(){return Array.from(this.cache_)},r.prototype.find=function(e){for(var t=0,n=this.allItems();t<n.length;t++){var i=n[t];if(e(i))return i}return null},r.prototype.includes=function(e){return this.cache_.has(e)},r.prototype.add=function(e,t){var n=this;if(this.includes(e))throw Vu.TpError.shouldNeverHappen();var i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);var o=this.extract_(e);o&&(o.emitter.on("add",this.onSubListAdd_),o.emitter.on("remove",this.onSubListRemove_),o.allItems().forEach(function(a){n.cache_.add(a)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})},r.prototype.remove=function(e){var t=this.items_.indexOf(e);if(!(t<0)){this.items_.splice(t,1),this.cache_.delete(e);var n=this.extract_(e);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}},r.prototype.onSubListAdd_=function(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})},r.prototype.onSubListRemove_=function(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})},r}();tt.NestedOrderedSet=Su;var rt={},Ou=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(rt,"__esModule",{value:!0});rt.InputBindingApi=void 0;var Mu=N,xu=E,$u=se,ku=I,Tu=function(r){Ou(e,r);function e(t){var n=r.call(this,t)||this;return n.onBindingChange_=n.onBindingChange_.bind(n),n.emitter_=new Mu.Emitter,n.controller_.binding.emitter.on("change",n.onBindingChange_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingChange_=function(t){var n=t.sender.target.read();this.emitter_.emit("change",{event:new ku.TpChangeEvent(this,(0,xu.forceCast)(n),this.controller_.binding.target.presetKey,t.options.last)})},e}($u.BladeApi);rt.InputBindingApi=Tu;var Se={},ju=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Se,"__esModule",{value:!0});Se.InputBindingController=void 0;var Ru=Le,Au=function(r){ju(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.binding=n.binding,i}return e}(Ru.LabelController);Se.InputBindingController=Au;var nt={},Nu=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(nt,"__esModule",{value:!0});nt.MonitorBindingApi=void 0;var Lu=N,Bu=E,Fu=se,Du=I,Iu=function(r){Nu(e,r);function e(t){var n=r.call(this,t)||this;return n.onBindingUpdate_=n.onBindingUpdate_.bind(n),n.emitter_=new Lu.Emitter,n.controller_.binding.emitter.on("update",n.onBindingUpdate_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingUpdate_=function(t){var n=t.sender.target.read();this.emitter_.emit("update",{event:new Du.TpUpdateEvent(this,(0,Bu.forceCast)(n),this.controller_.binding.target.presetKey)})},e}(Fu.BladeApi);nt.MonitorBindingApi=Iu;var Oe={},Ku=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Oe,"__esModule",{value:!0});Oe.MonitorBindingController=void 0;var Uu=Le,Hu=function(r){Ku(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.binding=n.binding,i.viewProps.bindDisabled(i.binding.ticker),i.viewProps.handleDispose(function(){i.binding.dispose()}),i}return e}(Uu.LabelController);Oe.MonitorBindingController=Hu;var Gu=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ce,"__esModule",{value:!0});Ce.RackApi=Ce.findSubBladeApiSet=void 0;var Ki=Ot,qu=N,hi=Z,Dn=E,zu=se,Cr=oe,Wu=et,In=I,Yu=Be,Xu=tt,Ju=rt,Zu=Se,Qu=nt,ep=Oe;function _a(r){return r instanceof ma?r.apiSet_:r instanceof Wu.RackLikeApi?r.rackApi_.apiSet_:null}Ce.findSubBladeApiSet=_a;function dt(r,e){var t=r.find(function(n){return n.controller_===e});if(!t)throw hi.TpError.shouldNeverHappen();return t}function Ui(r,e,t){if(!Ki.BindingTarget.isBindable(r))throw hi.TpError.notBindable();return new Ki.BindingTarget(r,e,t)}var ma=function(r){Gu(e,r);function e(t,n){var i=r.call(this,t)||this;i.onRackAdd_=i.onRackAdd_.bind(i),i.onRackRemove_=i.onRackRemove_.bind(i),i.onRackInputChange_=i.onRackInputChange_.bind(i),i.onRackMonitorUpdate_=i.onRackMonitorUpdate_.bind(i),i.emitter_=new qu.Emitter,i.apiSet_=new Xu.NestedOrderedSet(_a),i.pool_=n;var o=i.controller_.rack;return o.emitter.on("add",i.onRackAdd_),o.emitter.on("remove",i.onRackRemove_),o.emitter.on("inputchange",i.onRackInputChange_),o.emitter.on("monitorupdate",i.onRackMonitorUpdate_),o.children.forEach(function(a){i.setUpApi_(a)}),i}return Object.defineProperty(e.prototype,"children",{get:function(){var t=this;return this.controller_.rack.children.map(function(n){return dt(t.apiSet_,n)})},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,i){var o=i??{},a=this.controller_.view.element.ownerDocument,l=this.pool_.createInput(a,Ui(t,n,o.presetKey),o),s=new Ju.InputBindingApi(l);return this.add(s,o.index)},e.prototype.addMonitor=function(t,n,i){var o=i??{},a=this.controller_.view.element.ownerDocument,l=this.pool_.createMonitor(a,Ui(t,n),o),s=new Qu.MonitorBindingApi(l);return(0,Dn.forceCast)(this.add(s,o.index))},e.prototype.addFolder=function(t){return(0,Cr.addFolderAsBlade)(this,t)},e.prototype.addButton=function(t){return(0,Cr.addButtonAsBlade)(this,t)},e.prototype.addSeparator=function(t){return(0,Cr.addSeparatorAsBlade)(this,t)},e.prototype.addTab=function(t){return(0,Cr.addTabAsBlade)(this,t)},e.prototype.add=function(t,n){this.controller_.rack.add(t.controller_,n);var i=this.apiSet_.find(function(o){return o.controller_===t.controller_});return i&&this.apiSet_.remove(i),this.apiSet_.add(t),t},e.prototype.remove=function(t){this.controller_.rack.remove(t.controller_)},e.prototype.addBlade=function(t){var n=this.controller_.view.element.ownerDocument,i=this.pool_.createBlade(n,t),o=this.pool_.createBladeApi(i);return this.add(o,t.index)},e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e.prototype.setUpApi_=function(t){var n=this.apiSet_.find(function(i){return i.controller_===t});n||this.apiSet_.add(this.pool_.createBladeApi(t))},e.prototype.onRackAdd_=function(t){this.setUpApi_(t.bladeController)},e.prototype.onRackRemove_=function(t){if(t.isRoot){var n=dt(this.apiSet_,t.bladeController);this.apiSet_.remove(n)}},e.prototype.onRackInputChange_=function(t){var n=t.bladeController;if(n instanceof Zu.InputBindingController){var i=dt(this.apiSet_,n),o=n.binding;this.emitter_.emit("change",{event:new In.TpChangeEvent(i,(0,Dn.forceCast)(o.target.read()),o.target.presetKey,t.options.last)})}else if(n instanceof Yu.ValueBladeController){var i=dt(this.apiSet_,n);this.emitter_.emit("change",{event:new In.TpChangeEvent(i,n.value.rawValue,void 0,t.options.last)})}},e.prototype.onRackMonitorUpdate_=function(t){if(!(t.bladeController instanceof ep.MonitorBindingController))throw hi.TpError.shouldNeverHappen();var n=dt(this.apiSet_,t.bladeController),i=t.bladeController.binding;this.emitter_.emit("update",{event:new In.TpUpdateEvent(n,(0,Dn.forceCast)(i.target.read()),i.target.presetKey)})},e}(zu.BladeApi);Ce.RackApi=ma;var tp=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(jt,"__esModule",{value:!0});jt.FolderApi=void 0;var rp=N,np=et,ip=I,op=Ce,ap=function(r){tp(e,r);function e(t,n){var i=r.call(this,t,new op.RackApi(t.rackController,n))||this;return i.emitter_=new rp.Emitter,i.controller_.foldable.value("expanded").emitter.on("change",function(o){i.emitter_.emit("fold",{event:new ip.TpFoldEvent(i,o.sender.rawValue)})}),i.rackApi_.on("change",function(o){i.emitter_.emit("change",{event:o})}),i.rackApi_.on("update",function(o){i.emitter_.emit("update",{event:o})}),i}return Object.defineProperty(e.prototype,"expanded",{get:function(){return this.controller_.foldable.get("expanded")},set:function(t){this.controller_.foldable.set("expanded",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.controller_.props.get("title")},set:function(t){this.controller_.props.set("title",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,i){return this.rackApi_.addInput(t,n,i)},e.prototype.addMonitor=function(t,n,i){return this.rackApi_.addMonitor(t,n,i)},e.prototype.addFolder=function(t){return this.rackApi_.addFolder(t)},e.prototype.addButton=function(t){return this.rackApi_.addButton(t)},e.prototype.addSeparator=function(t){return this.rackApi_.addSeparator(t)},e.prototype.addTab=function(t){return this.rackApi_.addTab(t)},e.prototype.add=function(t,n){return this.rackApi_.add(t,n)},e.prototype.remove=function(t){this.rackApi_.remove(t)},e.prototype.addBlade=function(t){return this.rackApi_.addBlade(t)},e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e}(np.RackLikeApi);jt.FolderApi=ap;var Rt={},it={},lp=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(it,"__esModule",{value:!0});it.RackLikeController=void 0;var sp=ce,up=function(r){lp(e,r);function e(t){var n=r.call(this,{blade:t.blade,view:t.view,viewProps:t.rackController.viewProps})||this;return n.rackController=t.rackController,n}return e}(sp.BladeController);it.RackLikeController=up;var ct={},At={};Object.defineProperty(At,"__esModule",{value:!0});At.PlainView=void 0;var pp=O,dp=function(){function r(e,t){var n=(0,pp.ClassName)(t.viewName);this.element=e.createElement("div"),this.element.classList.add(n()),t.viewProps.bindClassModifiers(this.element)}return r}();At.PlainView=dp;var vt={},Hi;function cp(){if(Hi)return vt;Hi=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.BladeRack=void 0;var r=ye,e=N,t=Z,n=E,i=Se,o=Oe,a=Nt(),l=it,s=Be,p=tt;function m(f,b){for(var _=0;_<f.length;_++){var y=f[_];if(y instanceof i.InputBindingController&&y.binding===b)return y}return null}function c(f,b){for(var _=0;_<f.length;_++){var y=f[_];if(y instanceof o.MonitorBindingController&&y.binding===b)return y}return null}function d(f,b){for(var _=0;_<f.length;_++){var y=f[_];if(y instanceof s.ValueBladeController&&y.value===b)return y}return null}function w(f){return f instanceof a.RackController?f.rack:f instanceof l.RackLikeController?f.rackController.rack:null}function C(f){var b=w(f);return b?b.bcSet_:null}var P=function(){function f(b){var _,y;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new e.Emitter,this.blade_=(_=b.blade)!==null&&_!==void 0?_:null,(y=this.blade_)===null||y===void 0||y.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=b.viewProps,this.bcSet_=new p.NestedOrderedSet(C),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}return Object.defineProperty(f.prototype,"children",{get:function(){return this.bcSet_.items},enumerable:!1,configurable:!0}),f.prototype.add=function(b,_){var y;(y=b.parent)===null||y===void 0||y.remove(b),(0,n.isPropertyWritable)(b,"parent")?b.parent=this:(b.parent_=this,(0,r.warnMissing)({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(b,_)},f.prototype.remove=function(b){(0,n.isPropertyWritable)(b,"parent")?b.parent=null:(b.parent_=null,(0,r.warnMissing)({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(b)},f.prototype.find=function(b){return(0,n.forceCast)(this.bcSet_.allItems().filter(function(_){return _ instanceof b}))},f.prototype.onSetAdd_=function(b){this.updatePositions_();var _=b.target===b.root;if(this.emitter.emit("add",{bladeController:b.item,index:b.index,isRoot:_,sender:this}),!!_){var y=b.item;if(y.viewProps.emitter.on("change",this.onChildViewPropsChange_),y.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),y.viewProps.handleDispose(this.onChildDispose_),y instanceof i.InputBindingController)y.binding.emitter.on("change",this.onChildInputChange_);else if(y instanceof o.MonitorBindingController)y.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(y instanceof s.ValueBladeController)y.value.emitter.on("change",this.onChildValueChange_);else{var M=w(y);if(M){var S=M.emitter;S.on("layout",this.onDescendantLayout_),S.on("inputchange",this.onDescendantInputChange_),S.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}},f.prototype.onSetRemove_=function(b){this.updatePositions_();var _=b.target===b.root;if(this.emitter.emit("remove",{bladeController:b.item,isRoot:_,sender:this}),!!_){var y=b.item;if(y instanceof i.InputBindingController)y.binding.emitter.off("change",this.onChildInputChange_);else if(y instanceof o.MonitorBindingController)y.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(y instanceof s.ValueBladeController)y.value.emitter.off("change",this.onChildValueChange_);else{var M=w(y);if(M){var S=M.emitter;S.off("layout",this.onDescendantLayout_),S.off("inputchange",this.onDescendantInputChange_),S.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}},f.prototype.updatePositions_=function(){var b=this,_=this.bcSet_.items.filter(function(S){return!S.viewProps.get("hidden")}),y=_[0],M=_[_.length-1];this.bcSet_.items.forEach(function(S){var R=[];S===y&&(R.push("first"),(!b.blade_||b.blade_.get("positions").includes("veryfirst"))&&R.push("veryfirst")),S===M&&(R.push("last"),(!b.blade_||b.blade_.get("positions").includes("verylast"))&&R.push("verylast")),S.blade.set("positions",R)})},f.prototype.onChildPositionsChange_=function(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},f.prototype.onChildViewPropsChange_=function(b){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},f.prototype.onChildDispose_=function(){var b=this,_=this.bcSet_.items.filter(function(y){return y.viewProps.get("disposed")});_.forEach(function(y){b.bcSet_.remove(y)})},f.prototype.onChildInputChange_=function(b){var _=m(this.find(i.InputBindingController),b.sender);if(!_)throw t.TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:_,options:b.options,sender:this})},f.prototype.onChildMonitorUpdate_=function(b){var _=c(this.find(o.MonitorBindingController),b.sender);if(!_)throw t.TpError.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:_,sender:this})},f.prototype.onChildValueChange_=function(b){var _=d(this.find(s.ValueBladeController),b.sender);if(!_)throw t.TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:_,options:b.options,sender:this})},f.prototype.onDescendantLayout_=function(b){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},f.prototype.onDescendantInputChange_=function(b){this.emitter.emit("inputchange",{bladeController:b.bladeController,options:b.options,sender:this})},f.prototype.onDescendantMonitorUpdate_=function(b){this.emitter.emit("monitorupdate",{bladeController:b.bladeController,sender:this})},f.prototype.onBladePositionsChange_=function(){this.updatePositions_()},f}();return vt.BladeRack=P,vt}var Gi;function Nt(){if(Gi)return ct;Gi=1;var r=g&&g.__extends||function(){var l=function(s,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,c){m.__proto__=c}||function(m,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(m[d]=c[d])},l(s,p)};return function(s,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");l(s,p);function m(){this.constructor=s}s.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}(),e=g&&g.__assign||function(){return e=Object.assign||function(l){for(var s,p=1,m=arguments.length;p<m;p++){s=arguments[p];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(l[c]=s[c])}return l},e.apply(this,arguments)};Object.defineProperty(ct,"__esModule",{value:!0}),ct.RackController=void 0;var t=U,n=At,i=ce,o=cp(),a=function(l){r(s,l);function s(p,m){var c=l.call(this,e(e({},m),{view:new n.PlainView(p,{viewName:"brk",viewProps:m.viewProps})}))||this;c.onRackAdd_=c.onRackAdd_.bind(c),c.onRackRemove_=c.onRackRemove_.bind(c);var d=new o.BladeRack({blade:m.root?void 0:m.blade,viewProps:m.viewProps});return d.emitter.on("add",c.onRackAdd_),d.emitter.on("remove",c.onRackRemove_),c.rack=d,c.viewProps.handleDispose(function(){for(var w=c.rack.children.length-1;w>=0;w--){var C=c.rack.children[w];C.viewProps.set("disposed",!0)}}),c}return s.prototype.onRackAdd_=function(p){p.isRoot&&(0,t.insertElementAt)(this.view.element,p.bladeController.view.element,p.index)},s.prototype.onRackRemove_=function(p){p.isRoot&&(0,t.removeElement)(p.bladeController.view.element)},s}(i.BladeController);return ct.RackController=a,ct}var Lt={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.bladeContainerClassName=void 0;var vp=O;Bt.bladeContainerClassName=(0,vp.ClassName)("cnt");Object.defineProperty(Lt,"__esModule",{value:!0});Lt.FolderView=void 0;var qi=D,hp=O,zi=J,fp=E,_p=Bt,mp=function(){function r(e,t){var n=this,i;this.className_=(0,hp.ClassName)((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),(0,_p.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),(0,qi.bindValueMap)(this.foldable_,"completed",(0,zi.valueToClassName)(this.element,this.className_(void 0,"cpl")));var o=e.createElement("button");o.classList.add(this.className_("b")),(0,qi.bindValueMap)(t.props,"title",function(m){(0,fp.isEmpty)(m)?n.element.classList.add(n.className_(void 0,"not")):n.element.classList.remove(n.className_(void 0,"not"))}),t.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;var a=e.createElement("div");a.classList.add(this.className_("i")),this.element.appendChild(a);var l=e.createElement("div");l.classList.add(this.className_("t")),(0,zi.bindValueToTextContent)(t.props.value("title"),l),this.buttonElement.appendChild(l),this.titleElement=l;var s=e.createElement("div");s.classList.add(this.className_("m")),this.buttonElement.appendChild(s);var p=t.containerElement;p.classList.add(this.className_("c")),this.element.appendChild(p),this.containerElement=p}return r}();Lt.FolderView=mp;var bp=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kr=g&&g.__assign||function(){return Kr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Kr.apply(this,arguments)};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.FolderController=void 0;var wp=it,Wi=W,gp=Nt(),yp=Lt,Cp=function(r){bp(e,r);function e(t,n){var i=this,o,a=Wi.Foldable.create((o=n.expanded)!==null&&o!==void 0?o:!0),l=new gp.RackController(t,{blade:n.blade,root:n.root,viewProps:n.viewProps});return i=r.call(this,Kr(Kr({},n),{rackController:l,view:new yp.FolderView(t,{containerElement:l.view.element,foldable:a,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps})}))||this,i.onTitleClick_=i.onTitleClick_.bind(i),i.props=n.props,i.foldable=a,(0,Wi.bindFoldable)(i.foldable,i.view.containerElement),i.rackController.rack.emitter.on("add",function(){i.foldable.cleanUpTransition()}),i.rackController.rack.emitter.on("remove",function(){i.foldable.cleanUpTransition()}),i.view.buttonElement.addEventListener("click",i.onTitleClick_),i}return Object.defineProperty(e.prototype,"document",{get:function(){return this.view.element.ownerDocument},enumerable:!1,configurable:!0}),e.prototype.onTitleClick_=function(){this.foldable.set("expanded",!this.foldable.get("expanded"))},e}(wp.RackLikeController);Rt.FolderController=Cp;var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.FolderBladePlugin=void 0;var Pp=T,Yi=L,Ep=jt,Xi=Rt;Ft.FolderBladePlugin={id:"folder",type:"blade",accept:function(r){var e=Yi.ParamsParsers,t=(0,Yi.parseParams)(r,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return t?{params:t}:null},controller:function(r){return new Xi.FolderController(r.document,{blade:r.blade,expanded:r.params.expanded,props:Pp.ValueMap.fromObject({title:r.params.title}),viewProps:r.viewProps})},api:function(r){return r.controller instanceof Xi.FolderController?new Ep.FolderApi(r.controller,r.pool):null}};var Qr={},Vp=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ur=g&&g.__assign||function(){return Ur=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ur.apply(this,arguments)};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.LabeledValueController=void 0;var Sp=Be,Op=Qe,Mp=function(r){Vp(e,r);function e(t,n){var i=this,o=n.valueController.viewProps;return i=r.call(this,Ur(Ur({},n),{value:n.valueController.value,view:new Op.LabelView(t,{props:n.props,viewProps:o}),viewProps:o}))||this,i.props=n.props,i.valueController=n.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return e}(Sp.ValueBladeController);Qr.LabeledValueController=Mp;var Dt={},xp=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Dt,"__esModule",{value:!0});Dt.SeparatorApi=void 0;var $p=se,kp=function(r){xp(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}($p.BladeApi);Dt.SeparatorApi=kp;var It={},en={};Object.defineProperty(en,"__esModule",{value:!0});en.SeparatorView=void 0;var Tp=O,Ji=(0,Tp.ClassName)("spr"),jp=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(Ji()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("hr");n.classList.add(Ji("r")),this.element.appendChild(n)}return r}();en.SeparatorView=jp;var Rp=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hr=g&&g.__assign||function(){return Hr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Hr.apply(this,arguments)};Object.defineProperty(It,"__esModule",{value:!0});It.SeparatorController=void 0;var Ap=ce,Np=en,Lp=function(r){Rp(e,r);function e(t,n){return r.call(this,Hr(Hr({},n),{view:new Np.SeparatorView(t,{viewProps:n.viewProps})}))||this}return e}(Ap.BladeController);It.SeparatorController=Lp;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.SeparatorBladePlugin=void 0;var Zi=L,Bp=Dt,Qi=It;Kt.SeparatorBladePlugin={id:"separator",type:"blade",accept:function(r){var e=Zi.ParamsParsers,t=(0,Zi.parseParams)(r,{view:e.required.constant("separator")});return t?{params:t}:null},controller:function(r){return new Qi.SeparatorController(r.document,{blade:r.blade,viewProps:r.viewProps})},api:function(r){return r.controller instanceof Qi.SeparatorController?new Bp.SeparatorApi(r.controller):null}};var Ut={},ot={},tn={},rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.TabItemView=void 0;var Fp=D,Dp=O,Ip=J,ht=(0,Dp.ClassName)("tbi"),Kp=function(){function r(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(ht()),t.viewProps.bindClassModifiers(this.element),(0,Fp.bindValueMap)(t.props,"selected",function(a){a?n.element.classList.add(ht(void 0,"sel")):n.element.classList.remove(ht(void 0,"sel"))});var i=e.createElement("button");i.classList.add(ht("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;var o=e.createElement("div");o.classList.add(ht("t")),(0,Ip.bindValueToTextContent)(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o}return r}();rn.TabItemView=Kp;Object.defineProperty(tn,"__esModule",{value:!0});tn.TabItemController=void 0;var Up=N,Hp=rn,Gp=function(){function r(e,t){this.emitter=new Up.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Hp.TabItemView(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return r.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},r}();tn.TabItemController=Gp;Object.defineProperty(ot,"__esModule",{value:!0});ot.TabPageController=void 0;var qp=D,eo=ve,zp=Ve,Wp=Nt(),Yp=tn,Xp=function(){function r(e,t){var n=this;this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Yp.TabItemController(e,{props:t.itemProps,viewProps:eo.ViewProps.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Wp.RackController(e,{blade:(0,zp.createBlade)(),viewProps:eo.ViewProps.create()}),this.props=t.props,(0,qp.bindValueMap)(this.props,"selected",function(i){n.itemController.props.set("selected",i),n.contentController.viewProps.set("hidden",!i)})}return Object.defineProperty(r.prototype,"itemController",{get:function(){return this.ic_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"contentController",{get:function(){return this.cc_},enumerable:!1,configurable:!0}),r.prototype.onItemClick_=function(){this.props.set("selected",!0)},r}();ot.TabPageController=Xp;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.TabPageApi=void 0;var Jp=function(){function r(e,t){this.controller_=e,this.rackApi_=t}return Object.defineProperty(r.prototype,"title",{get:function(){var e;return(e=this.controller_.itemController.props.get("title"))!==null&&e!==void 0?e:""},set:function(e){this.controller_.itemController.props.set("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.controller_.props.get("selected")},set:function(e){this.controller_.props.set("selected",e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),r.prototype.addButton=function(e){return this.rackApi_.addButton(e)},r.prototype.addFolder=function(e){return this.rackApi_.addFolder(e)},r.prototype.addSeparator=function(e){return this.rackApi_.addSeparator(e)},r.prototype.addTab=function(e){return this.rackApi_.addTab(e)},r.prototype.add=function(e,t){this.rackApi_.add(e,t)},r.prototype.remove=function(e){this.rackApi_.remove(e)},r.prototype.addInput=function(e,t,n){return this.rackApi_.addInput(e,t,n)},r.prototype.addMonitor=function(e,t,n){return this.rackApi_.addMonitor(e,t,n)},r.prototype.addBlade=function(e){return this.rackApi_.addBlade(e)},r}();Ht.TabPageApi=Jp;var Zp=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.TabApi=void 0;var Qp=N,to=T,Pr=Z,ed=et,td=I,rd=Ce,nd=ot,id=Ht,od=function(r){Zp(e,r);function e(t,n){var i=r.call(this,t,new rd.RackApi(t.rackController,n))||this;return i.onPageAdd_=i.onPageAdd_.bind(i),i.onPageRemove_=i.onPageRemove_.bind(i),i.onSelect_=i.onSelect_.bind(i),i.emitter_=new Qp.Emitter,i.pageApiMap_=new Map,i.rackApi_.on("change",function(o){i.emitter_.emit("change",{event:o})}),i.rackApi_.on("update",function(o){i.emitter_.emit("update",{event:o})}),i.controller_.tab.selectedIndex.emitter.on("change",i.onSelect_),i.controller_.pageSet.emitter.on("add",i.onPageAdd_),i.controller_.pageSet.emitter.on("remove",i.onPageRemove_),i.controller_.pageSet.items.forEach(function(o){i.setUpPageApi_(o)}),i}return Object.defineProperty(e.prototype,"pages",{get:function(){var t=this;return this.controller_.pageSet.items.map(function(n){var i=t.pageApiMap_.get(n);if(!i)throw Pr.TpError.shouldNeverHappen();return i})},enumerable:!1,configurable:!0}),e.prototype.addPage=function(t){var n=this.controller_.view.element.ownerDocument,i=new nd.TabPageController(n,{itemProps:to.ValueMap.fromObject({selected:!1,title:t.title}),props:to.ValueMap.fromObject({selected:!1})});this.controller_.add(i,t.index);var o=this.pageApiMap_.get(i);if(!o)throw Pr.TpError.shouldNeverHappen();return o},e.prototype.removePage=function(t){this.controller_.remove(t)},e.prototype.on=function(t,n){var i=n.bind(this);return this.emitter_.on(t,function(o){i(o.event)}),this},e.prototype.setUpPageApi_=function(t){var n=this.rackApi_.apiSet_.find(function(o){return o.controller_===t.contentController});if(!n)throw Pr.TpError.shouldNeverHappen();var i=new id.TabPageApi(t,n);this.pageApiMap_.set(t,i)},e.prototype.onPageAdd_=function(t){this.setUpPageApi_(t.item)},e.prototype.onPageRemove_=function(t){var n=this.pageApiMap_.get(t.item);if(!n)throw Pr.TpError.shouldNeverHappen();this.pageApiMap_.delete(t.item)},e.prototype.onSelect_=function(t){this.emitter_.emit("select",{event:new td.TpTabSelectEvent(this,t.rawValue)})},e}(ed.RackLikeApi);Ut.TabApi=od;var Gt={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.Tab=void 0;var ro=G,no=-1,ad=function(){function r(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=(0,ro.createValue)(!0),this.selectedIndex=(0,ro.createValue)(no),this.items_=[]}return r.prototype.add=function(e,t){var n=t??this.items_.length;this.items_.splice(n,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()},r.prototype.remove=function(e){var t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())},r.prototype.keepSelection_=function(){if(this.items_.length===0){this.selectedIndex.rawValue=no,this.empty.rawValue=!0;return}var e=this.items_.findIndex(function(t){return t.rawValue});e<0?(this.items_.forEach(function(t,n){t.rawValue=n===0}),this.selectedIndex.rawValue=0):(this.items_.forEach(function(t,n){t.rawValue=n===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1},r.prototype.onItemSelectedChange_=function(e){if(e.rawValue){var t=this.items_.findIndex(function(n){return n===e.sender});this.items_.forEach(function(n,i){n.rawValue=i===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()},r}();nn.Tab=ad;var on={};Object.defineProperty(on,"__esModule",{value:!0});on.TabView=void 0;var ld=D,sd=O,ud=J,pd=Bt,ft=(0,sd.ClassName)("tab"),dd=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(ft(),(0,pd.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),(0,ld.bindValue)(t.empty,(0,ud.valueToClassName)(this.element,ft(void 0,"nop")));var n=e.createElement("div");n.classList.add(ft("t")),this.element.appendChild(n),this.itemsElement=n;var i=e.createElement("div");i.classList.add(ft("i")),this.element.appendChild(i);var o=t.contentsElement;o.classList.add(ft("c")),this.element.appendChild(o),this.contentsElement=o}return r}();on.TabView=dd;var cd=g&&g.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.TabController=void 0;var io=U,vd=it,hd=tt,fd=Nt(),_d=nn,md=on,bd=function(r){cd(e,r);function e(t,n){var i=this,o=new fd.RackController(t,{blade:n.blade,viewProps:n.viewProps}),a=new _d.Tab;return i=r.call(this,{blade:n.blade,rackController:o,view:new md.TabView(t,{contentsElement:o.view.element,empty:a.empty,viewProps:n.viewProps})})||this,i.onPageAdd_=i.onPageAdd_.bind(i),i.onPageRemove_=i.onPageRemove_.bind(i),i.pageSet_=new hd.NestedOrderedSet(function(){return null}),i.pageSet_.emitter.on("add",i.onPageAdd_),i.pageSet_.emitter.on("remove",i.onPageRemove_),i.tab=a,i}return Object.defineProperty(e.prototype,"pageSet",{get:function(){return this.pageSet_},enumerable:!1,configurable:!0}),e.prototype.add=function(t,n){this.pageSet_.add(t,n)},e.prototype.remove=function(t){this.pageSet_.remove(this.pageSet_.items[t])},e.prototype.onPageAdd_=function(t){var n=t.item;(0,io.insertElementAt)(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(n.contentController,t.index),this.tab.add(n.props.value("selected"))},e.prototype.onPageRemove_=function(t){var n=t.item;(0,io.removeElement)(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.rackController.rack.remove(n.contentController),this.tab.remove(n.props.value("selected"))},e}(vd.RackLikeController);Gt.TabController=bd;var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.TabBladePlugin=void 0;var oo=T,ao=L,wd=Ut,lo=Gt,gd=ot;qt.TabBladePlugin={id:"tab",type:"blade",accept:function(r){var e=ao.ParamsParsers,t=(0,ao.parseParams)(r,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return!t||t.pages.length===0?null:{params:t}},controller:function(r){var e=new lo.TabController(r.document,{blade:r.blade,viewProps:r.viewProps});return r.params.pages.forEach(function(t){var n=new gd.TabPageController(r.document,{itemProps:oo.ValueMap.fromObject({selected:!1,title:t.title}),props:oo.ValueMap.fromObject({selected:!1})});e.add(n)}),e},api:function(r){return r.controller instanceof lo.TabController?new wd.TabApi(r.controller,r.pool):null}};var zt={},Gr=g&&g.__assign||function(){return Gr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Gr.apply(this,arguments)};Object.defineProperty(zt,"__esModule",{value:!0});zt.createBladeController=void 0;var yd=ve,so=L,Cd=E,Pd=Ve;function Ed(r,e){var t=r.accept(e.params);if(!t)return null;var n=so.ParamsParsers.optional.boolean(e.params.disabled).value,i=so.ParamsParsers.optional.boolean(e.params.hidden).value;return r.controller({blade:(0,Pd.createBlade)(),document:e.document,params:(0,Cd.forceCast)(Gr(Gr({},t.params),{disabled:n,hidden:i})),viewProps:yd.ViewProps.create({disabled:n,hidden:i})})}zt.createBladeController=Ed;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.ManualTicker=void 0;var Vd=N,Sd=function(){function r(){this.disabled=!1,this.emitter=new Vd.Emitter}return r.prototype.dispose=function(){},r.prototype.tick=function(){this.disabled||this.emitter.emit("tick",{sender:this})},r}();Wt.ManualTicker=Sd;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.IntervalTicker=void 0;var Od=N,Md=function(){function r(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Od.Emitter,this.interval_=t,this.setTimer_()}return Object.defineProperty(r.prototype,"disabled",{get:function(){return this.disabled_},set:function(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){this.clearTimer_()},r.prototype.clearTimer_=function(){if(this.timerId_!==null){var e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}},r.prototype.setTimer_=function(){if(this.clearTimer_(),!(this.interval_<=0)){var e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}},r.prototype.onTick_=function(){this.disabled_||this.emitter.emit("tick",{sender:this})},r}();Yt.IntervalTicker=Md;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.InputBinding=void 0;var xd=N,$d=function(){function r(e){this.onValueChange_=this.onValueChange_.bind(this),this.reader=e.reader,this.writer=e.writer,this.emitter=new xd.Emitter,this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.target=e.target,this.read()}return r.prototype.read=function(){var e=this.target.read();e!==void 0&&(this.value.rawValue=this.reader(e))},r.prototype.write_=function(e){this.writer(this.target,e)},r.prototype.onValueChange_=function(e){this.write_(e.rawValue),this.emitter.emit("change",{options:e.options,rawValue:e.rawValue,sender:this})},r}();Xt.InputBinding=$d;var Jt={},Pe={},uo=g&&g.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createPushedBuffer=Pe.initializeBuffer=void 0;var kd=E,Td=G;function wa(r,e){for(;r.length<e;)r.push(void 0)}function jd(r){var e=[];return wa(e,r),(0,Td.createValue)(e)}Pe.initializeBuffer=jd;function Rd(r){var e=r.indexOf(void 0);return(0,kd.forceCast)(e<0?r:r.slice(0,e))}function Ad(r,e){var t=uo(uo([],Rd(r),!0),[e],!1);return t.length>r.length?t.splice(0,t.length-r.length):wa(t,r.length),t}Pe.createPushedBuffer=Ad;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.MonitorBinding=void 0;var Nd=Pe,Ld=N,Bd=function(){function r(e){this.onTick_=this.onTick_.bind(this),this.reader_=e.reader,this.target=e.target,this.emitter=new Ld.Emitter,this.value=e.value,this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return r.prototype.dispose=function(){this.ticker.dispose()},r.prototype.read=function(){var e=this.target.read();if(e!==void 0){var t=this.value.rawValue,n=this.reader_(e);this.value.rawValue=(0,Nd.createPushedBuffer)(t,n),this.emitter.emit("update",{rawValue:n,sender:this})}},r.prototype.onTick_=function(e){this.read()},r}();Jt.MonitorBinding=Bd;var re={};Object.defineProperty(re,"__esModule",{value:!0});re.findConstraint=re.CompositeConstraint=void 0;var ga=function(){function r(e){this.constraints=e}return r.prototype.constrain=function(e){return this.constraints.reduce(function(t,n){return n.constrain(t)},e)},r}();re.CompositeConstraint=ga;function Fd(r,e){if(r instanceof e)return r;if(r instanceof ga){var t=r.constraints.reduce(function(n,i){return n||(i instanceof e?i:null)},null);if(t)return t}return null}re.findConstraint=Fd;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.DefiniteRangeConstraint=void 0;var Dd=T,Id=function(){function r(e){this.values=Dd.ValueMap.fromObject({max:e.max,min:e.min})}return r.prototype.constrain=function(e){var t=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(e,n),t)},r}();Fe.DefiniteRangeConstraint=Id;var Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.ListConstraint=void 0;var Kd=T,Ud=function(){function r(e){this.values=Kd.ValueMap.fromObject({options:e})}return Object.defineProperty(r.prototype,"options",{get:function(){return this.values.get("options")},enumerable:!1,configurable:!0}),r.prototype.constrain=function(e){var t=this.values.get("options");if(t.length===0)return e;var n=t.filter(function(i){return i.value===e}).length>0;return n?e:t[0].value},r}();Me.ListConstraint=Ud;var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.RangeConstraint=void 0;var po=E,Hd=T,Gd=function(){function r(e){this.values=Hd.ValueMap.fromObject({max:e.max,min:e.min})}return Object.defineProperty(r.prototype,"maxValue",{get:function(){return this.values.get("max")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minValue",{get:function(){return this.values.get("min")},enumerable:!1,configurable:!0}),r.prototype.constrain=function(e){var t=this.values.get("max"),n=this.values.get("min"),i=e;return(0,po.isEmpty)(n)||(i=Math.max(i,n)),(0,po.isEmpty)(t)||(i=Math.min(i,t)),i},r}();Zt.RangeConstraint=Gd;var at={};Object.defineProperty(at,"__esModule",{value:!0});at.StepConstraint=void 0;var qd=function(){function r(e,t){t===void 0&&(t=0),this.step=e,this.origin=t}return r.prototype.constrain=function(e){var t=this.origin%this.step,n=Math.round((e-t)/this.step);return t+n*this.step},r}();at.StepConstraint=qd;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});var De={},Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.ListView=void 0;var co=U,zd=D,Wd=O,Kn=(0,Wd.ClassName)("lst"),Yd=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(Kn()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("select");n.classList.add(Kn("s")),(0,zd.bindValueMap)(this.props_,"options",function(o){(0,co.removeChildElements)(n),o.forEach(function(a,l){var s=e.createElement("option");s.dataset.index=String(l),s.textContent=a.text,s.value=String(a.value),n.appendChild(s)})}),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;var i=e.createElement("div");i.classList.add(Kn("m")),i.appendChild((0,co.createSvgIconElement)(e,"dropdown")),this.element.appendChild(i),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,this.update_()}return r.prototype.update_=function(){this.selectElement.value=String(this.value_.rawValue)},r.prototype.onValueChange_=function(){this.update_()},r}();Qt.ListView=Yd;Object.defineProperty(De,"__esModule",{value:!0});De.ListController=void 0;var Xd=E,Jd=Qt,Zd=function(){function r(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Jd.ListView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return r.prototype.onSelectChange_=function(e){var t=(0,Xd.forceCast)(e.currentTarget),n=t.selectedOptions.item(0);if(n){var i=Number(n.dataset.index);this.value.rawValue=this.props.get("options")[i].value}},r}();De.ListController=Zd;var lt={},er={};Object.defineProperty(er,"__esModule",{value:!0});er.PopupView=void 0;var Qd=D,ec=O,tc=J,vo=(0,ec.ClassName)("pop"),rc=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(vo()),t.viewProps.bindClassModifiers(this.element),(0,Qd.bindValue)(t.shows,(0,tc.valueToClassName)(this.element,vo(void 0,"v")))}return r}();er.PopupView=rc;Object.defineProperty(lt,"__esModule",{value:!0});lt.PopupController=void 0;var nc=G,ic=er,oc=function(){function r(e,t){this.shows=(0,nc.createValue)(!1),this.viewProps=t.viewProps,this.view=new ic.PopupView(e,{shows:this.shows,viewProps:this.viewProps})}return r}();lt.PopupController=oc;var st={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.TextView=void 0;var ac=O,ho=(0,ac.ClassName)("txt"),lc=function(){function r(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ho()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);var n=e.createElement("input");n.classList.add(ho("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}return r.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)},r.prototype.onChange_=function(){this.refresh()},r}();tr.TextView=lc;Object.defineProperty(st,"__esModule",{value:!0});st.TextController=void 0;var fo=E,sc=tr,uc=function(){function r(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new sc.TextView(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return r.prototype.onInputChange_=function(e){var t=(0,fo.forceCast)(e.currentTarget),n=t.value,i=this.parser_(n);(0,fo.isEmpty)(i)||(this.value.rawValue=i),this.view.refresh()},r}();st.TextController=uc;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.BooleanFormatter=ae.boolFromUnknown=ae.boolToString=void 0;function Ea(r){return String(r)}ae.boolToString=Ea;function pc(r){return r==="false"?!1:!!r}ae.boolFromUnknown=pc;function dc(r){return Ea(r)}ae.BooleanFormatter=dc;var Va={};Object.defineProperty(Va,"__esModule",{value:!0});var F={},an={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.UnaryOperationNode=ge.BinaryOperationNode=ge.NumberLiteralNode=void 0;var cc=function(){function r(e){this.text=e}return r.prototype.evaluate=function(){return Number(this.text)},r.prototype.toString=function(){return this.text},r}();ge.NumberLiteralNode=cc;var vc={"**":function(r,e){return Math.pow(r,e)},"*":function(r,e){return r*e},"/":function(r,e){return r/e},"%":function(r,e){return r%e},"+":function(r,e){return r+e},"-":function(r,e){return r-e},"<<":function(r,e){return r<<e},">>":function(r,e){return r>>e},">>>":function(r,e){return r>>>e},"&":function(r,e){return r&e},"^":function(r,e){return r^e},"|":function(r,e){return r|e}},hc=function(){function r(e,t,n){this.left=t,this.operator=e,this.right=n}return r.prototype.evaluate=function(){var e=vc[this.operator];if(!e)throw new Error("unexpected binary operator: '".concat(this.operator));return e(this.left.evaluate(),this.right.evaluate())},r.prototype.toString=function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")},r}();ge.BinaryOperationNode=hc;var fc={"+":function(r){return r},"-":function(r){return-r},"~":function(r){return~r}},_c=function(){function r(e,t){this.operator=e,this.expression=t}return r.prototype.evaluate=function(){var e=fc[this.operator];if(!e)throw new Error("unexpected unary operator: '".concat(this.operator));return e(this.expression.evaluate())},r.prototype.toString=function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")},r}();ge.UnaryOperationNode=_c;var We={};Object.defineProperty(We,"__esModule",{value:!0});We.readNumericLiteral=We.readWhitespace=void 0;function fi(r){return function(e,t){for(var n=0;n<r.length;n++){var i=r[n](e,t);if(i!=="")return i}return""}}function mc(r,e){var t,n=r.substr(e).match(/^\s+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}We.readWhitespace=mc;function bc(r,e){var t=r.substr(e,1);return t.match(/^[1-9]$/)?t:""}function Et(r,e){var t,n=r.substr(e).match(/^[0-9]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function wc(r,e){var t=Et(r,e);if(t!=="")return t;var n=r.substr(e,1);if(e+=1,n!=="-"&&n!=="+")return"";var i=Et(r,e);return i===""?"":n+i}function _i(r,e){var t=r.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";var n=wc(r,e);return n===""?"":t+n}function Sa(r,e){var t=r.substr(e,1);if(t==="0")return t;var n=bc(r,e);return e+=n.length,n===""?"":n+Et(r,e)}function gc(r,e){var t=Sa(r,e);if(e+=t.length,t==="")return"";var n=r.substr(e,1);if(e+=n.length,n!==".")return"";var i=Et(r,e);return e+=i.length,t+n+i+_i(r,e)}function yc(r,e){var t=r.substr(e,1);if(e+=t.length,t!==".")return"";var n=Et(r,e);return e+=n.length,n===""?"":t+n+_i(r,e)}function Cc(r,e){var t=Sa(r,e);return e+=t.length,t===""?"":t+_i(r,e)}var Pc=fi([gc,yc,Cc]);function Ec(r,e){var t,n=r.substr(e).match(/^[01]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Vc(r,e){var t=r.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";var n=Ec(r,e);return n===""?"":t+n}function Sc(r,e){var t,n=r.substr(e).match(/^[0-7]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Oc(r,e){var t=r.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";var n=Sc(r,e);return n===""?"":t+n}function Mc(r,e){var t,n=r.substr(e).match(/^[0-9a-f]+/i);return(t=n&&n[0])!==null&&t!==void 0?t:""}function xc(r,e){var t=r.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";var n=Mc(r,e);return n===""?"":t+n}var $c=fi([Vc,Oc,xc]);We.readNumericLiteral=fi([$c,Pc]);Object.defineProperty(an,"__esModule",{value:!0});an.parseEcmaNumberExpression=void 0;var mi=ge,Ye=We;function kc(r,e){var t=(0,Ye.readNumericLiteral)(r,e);return e+=t.length,t===""?null:{evaluable:new mi.NumberLiteralNode(t),cursor:e}}function Tc(r,e){var t=r.substr(e,1);if(e+=t.length,t!=="(")return null;var n=Ma(r,e);if(!n)return null;e=n.cursor,e+=(0,Ye.readWhitespace)(r,e).length;var i=r.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:n.evaluable,cursor:e}}function jc(r,e){var t;return(t=kc(r,e))!==null&&t!==void 0?t:Tc(r,e)}function Oa(r,e){var t=jc(r,e);if(t)return t;var n=r.substr(e,1);if(e+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;var i=Oa(r,e);return i?(e=i.cursor,{cursor:e,evaluable:new mi.UnaryOperationNode(n,i.evaluable)}):null}function Rc(r,e,t){t+=(0,Ye.readWhitespace)(e,t).length;var n=r.filter(function(i){return e.startsWith(i,t)})[0];return n?(t+=n.length,t+=(0,Ye.readWhitespace)(e,t).length,{cursor:t,operator:n}):null}function Ac(r,e){return function(t,n){var i=r(t,n);if(!i)return null;n=i.cursor;for(var o=i.evaluable;;){var a=Rc(e,t,n);if(!a)break;n=a.cursor;var l=r(t,n);if(!l)return null;n=l.cursor,o=new mi.BinaryOperationNode(a.operator,o,l.evaluable)}return o?{cursor:n,evaluable:o}:null}}var Nc=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(function(r,e){return Ac(r,e)},Oa);function Ma(r,e){return e+=(0,Ye.readWhitespace)(r,e).length,Nc(r,e)}function Lc(r){var e=Ma(r,0);if(!e)return null;var t=e.cursor+(0,Ye.readWhitespace)(r,e.cursor).length;return t!==r.length?null:e.evaluable}an.parseEcmaNumberExpression=Lc;Object.defineProperty(F,"__esModule",{value:!0});F.createNumberFormatter=F.numberToString=F.numberFromUnknown=F.parseNumber=void 0;var Bc=E,Fc=an;function xa(r){var e,t=(0,Fc.parseEcmaNumberExpression)(r);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}F.parseNumber=xa;function Dc(r){if(typeof r=="number")return r;if(typeof r=="string"){var e=xa(r);if(!(0,Bc.isEmpty)(e))return e}return 0}F.numberFromUnknown=Dc;function Ic(r){return String(r)}F.numberToString=Ic;function Kc(r){return function(e){return e.toFixed(Math.max(Math.min(r,20),0))}}F.createNumberFormatter=Kc;var $a={};Object.defineProperty($a,"__esModule",{value:!0});var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.formatPercentage=void 0;var Uc=F,Hc=(0,Uc.createNumberFormatter)(0);function Gc(r){return Hc(r)+"%"}rr.formatPercentage=Gc;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.formatString=Ee.stringFromUnknown=void 0;function qc(r){return String(r)}Ee.stringFromUnknown=qc;function zc(r){return r}Ee.formatString=zc;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});var he={};Object.defineProperty(he,"__esModule",{value:!0});he.connectValues=void 0;function Wc(r){var e=r.primary,t=r.secondary,n=r.forward,i=r.backward,o=!1;function a(l){o||(o=!0,l(),o=!1)}e.emitter.on("change",function(l){a(function(){t.setRawValue(n(e,t),l.options)})}),t.emitter.on("change",function(l){a(function(){e.setRawValue(i(e,t),l.options)}),a(function(){t.setRawValue(n(e,t),l.options)})}),a(function(){t.setRawValue(n(e,t),{forceEmit:!1,last:!0})})}he.connectValues=Wc;var fe={},K={};Object.defineProperty(K,"__esModule",{value:!0});K.isArrowKey=K.isVerticalArrowKey=K.getHorizontalStepKeys=K.getVerticalStepKeys=K.getStepForKey=void 0;function Yc(r,e){var t=r*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}K.getStepForKey=Yc;function Xc(r){return{altKey:r.altKey,downKey:r.key==="ArrowDown",shiftKey:r.shiftKey,upKey:r.key==="ArrowUp"}}K.getVerticalStepKeys=Xc;function Jc(r){return{altKey:r.altKey,downKey:r.key==="ArrowLeft",shiftKey:r.shiftKey,upKey:r.key==="ArrowRight"}}K.getHorizontalStepKeys=Jc;function Ta(r){return r==="ArrowUp"||r==="ArrowDown"}K.isVerticalArrowKey=Ta;function Zc(r){return Ta(r)||r==="ArrowLeft"||r==="ArrowRight"}K.isArrowKey=Zc;var ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.PointerHandler=void 0;var Qc=N;function Un(r,e){var t,n,i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:r.pageX-(((t=i&&i.scrollX)!==null&&t!==void 0?t:0)+o.left),y:r.pageY-(((n=i&&i.scrollY)!==null&&n!==void 0?n:0)+o.top)}}var ev=function(){function r(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Qc.Emitter,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}return r.prototype.computePosition_=function(e){var t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}},r.prototype.onMouseDown_=function(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Un(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},r.prototype.onDocumentMouseMove_=function(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Un(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},r.prototype.onDocumentMouseUp_=function(e){var t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Un(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},r.prototype.onTouchStart_=function(e){e.preventDefault();var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},r.prototype.onTouchMove_=function(e){var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},r.prototype.onTouchEnd_=function(e){var t,n=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})},r}();ne.PointerHandler=ev;var nr={},k={};Object.defineProperty(k,"__esModule",{value:!0});k.loopRange=k.constrainRange=k.getDecimalDigits=k.mapRange=void 0;function tv(r,e,t,n,i){var o=(r-e)/(t-e);return n+o*(i-n)}k.mapRange=tv;function rv(r){var e=String(r.toFixed(10)),t=e.split(".")[1];return t.replace(/0+$/,"").length}k.getDecimalDigits=rv;function nv(r,e,t){return Math.min(Math.max(r,e),t)}k.constrainRange=nv;function iv(r,e){return(r%e+e)%e}k.loopRange=iv;Object.defineProperty(nr,"__esModule",{value:!0});nr.NumberTextView=void 0;var Hn=U,ov=k,ja=O,ee=(0,ja.ClassName)("txt"),av=function(){function r(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ee(),ee(void 0,"num")),t.arrayPosition&&this.element.classList.add(ee(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(ee("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ee()),this.inputElement.classList.add(ee("i"));var i=e.createElement("div");i.classList.add(ee("k")),this.element.appendChild(i),this.knobElement=i;var o=e.createElementNS(Hn.SVG_NS,"svg");o.classList.add(ee("g")),this.knobElement.appendChild(o);var a=e.createElementNS(Hn.SVG_NS,"path");a.classList.add(ee("gb")),o.appendChild(a),this.guideBodyElem_=a;var l=e.createElementNS(Hn.SVG_NS,"path");l.classList.add(ee("gh")),o.appendChild(l),this.guideHeadElem_=l;var s=e.createElement("div");s.classList.add((0,ja.ClassName)("tt")()),this.knobElement.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}return r.prototype.onDraggingChange_=function(e){if(e.rawValue===null){this.element.classList.remove(ee(void 0,"drg"));return}this.element.classList.add(ee(void 0,"drg"));var t=e.rawValue/this.props_.get("draggingScale"),n=t+(t>0?-1:t<0?1:0),i=(0,ov.constrainRange)(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M ".concat(n+i,",0 L").concat(n,",4 L").concat(n+i,",8"),"M ".concat(t,",-1 L").concat(t,",9")].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L".concat(t,",4"));var o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left="".concat(t,"px")},r.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)},r.prototype.onChange_=function(){this.refresh()},r}();nr.NumberTextView=av;Object.defineProperty(fe,"__esModule",{value:!0});fe.NumberTextController=void 0;var _o=E,lv=G,Er=K,sv=ne,uv=nr,pv=function(){function r(e,t){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.parser_=t.parser,this.props=t.props,this.sliderProps_=(n=t.sliderProps)!==null&&n!==void 0?n:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=(0,lv.createValue)(null),this.view=new uv.NumberTextView(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var i=new sv.PointerHandler(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}return r.prototype.constrainValue_=function(e){var t,n,i=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("minValue"),o=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("maxValue"),a=e;return i!==void 0&&(a=Math.max(a,i)),o!==void 0&&(a=Math.min(a,o)),a},r.prototype.onInputChange_=function(e){var t=(0,_o.forceCast)(e.currentTarget),n=t.value,i=this.parser_(n);(0,_o.isEmpty)(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()},r.prototype.onInputKeyDown_=function(e){var t=(0,Er.getStepForKey)(this.baseStep_,(0,Er.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})},r.prototype.onInputKeyUp_=function(e){var t=(0,Er.getStepForKey)(this.baseStep_,(0,Er.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r.prototype.onPointerDown_=function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0},r.prototype.computeDraggingValue_=function(e){if(!e.point)return null;var t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("draggingScale"))},r.prototype.onPointerMove_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)},r.prototype.onPointerUp_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)},r}();fe.NumberTextController=pv;var ir={},or={};Object.defineProperty(or,"__esModule",{value:!0});or.SliderView=void 0;var mo=k,dv=O,Gn=(0,dv.ClassName)("sld"),cv=function(){function r(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Gn()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(Gn("t")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;var i=e.createElement("div");i.classList.add(Gn("k")),this.trackElement.appendChild(i),this.knobElement=i,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}return r.prototype.update_=function(){var e=(0,mo.constrainRange)((0,mo.mapRange)(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width="".concat(e,"%")},r.prototype.onChange_=function(){this.update_()},r}();or.SliderView=cv;Object.defineProperty(ir,"__esModule",{value:!0});ir.SliderController=void 0;var bo=k,Vr=K,vv=ne,hv=or,fv=function(){function r(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new hv.SliderView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new vv.PointerHandler(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){e.point&&this.value.setRawValue((0,bo.mapRange)((0,bo.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),t)},r.prototype.onPointerDownOrMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onKeyDown_=function(e){var t=(0,Vr.getStepForKey)(this.baseStep_,(0,Vr.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})},r.prototype.onKeyUp_=function(e){var t=(0,Vr.getStepForKey)(this.baseStep_,(0,Vr.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();ir.SliderController=fv;var ar={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.SliderTextView=void 0;var _v=O,qn=(0,_v.ClassName)("sldtxt"),mv=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(qn());var n=e.createElement("div");n.classList.add(qn("s")),this.sliderView_=t.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);var i=e.createElement("div");i.classList.add(qn("t")),this.textView_=t.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}return r}();lr.SliderTextView=mv;Object.defineProperty(ar,"__esModule",{value:!0});ar.SliderTextController=void 0;var bv=lr,wv=fe,gv=ir,yv=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new gv.SliderController(e,{baseStep:t.baseStep,props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new wv.NumberTextController(e,{baseStep:t.baseStep,parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new bv.SliderTextView(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}return Object.defineProperty(r.prototype,"sliderController",{get:function(){return this.sliderC_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),r}();ar.SliderTextController=yv;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.writePrimitive=void 0;function Cv(r,e){r.write(e)}xe.writePrimitive=Cv;var j={};Object.defineProperty(j,"__esModule",{value:!0});j.getSuitableDraggingScale=j.getBaseStep=j.getSuitableDecimalDigits=j.createListConstraint=j.normalizeListOptions=j.parsePointDimensionParams=j.parsePickerLayout=j.parseListOptions=void 0;var wo=E,bi=re,Pv=Me,wi=at,go=k,Na=L;function Ev(r){var e=Na.ParamsParsers;if(Array.isArray(r))return e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(r).value;if(typeof r=="object")return e.required.raw(r).value}j.parseListOptions=Ev;function Vv(r){if(r==="inline"||r==="popup")return r}j.parsePickerLayout=Vv;function Sv(r){var e=Na.ParamsParsers;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(r).value}j.parsePointDimensionParams=Sv;function La(r){if(Array.isArray(r))return r;var e=[];return Object.keys(r).forEach(function(t){e.push({text:t,value:r[t]})}),e}j.normalizeListOptions=La;function Ov(r){return(0,wo.isEmpty)(r)?null:new Pv.ListConstraint(La((0,wo.forceCast)(r)))}j.createListConstraint=Ov;function Mv(r){var e=r?(0,bi.findConstraint)(r,wi.StepConstraint):null;return e?e.step:null}function xv(r,e){var t=r&&(0,bi.findConstraint)(r,wi.StepConstraint);return t?(0,go.getDecimalDigits)(t.step):Math.max((0,go.getDecimalDigits)(e),2)}j.getSuitableDecimalDigits=xv;function $v(r){var e=Mv(r);return e??1}j.getBaseStep=$v;function kv(r,e){var t,n=r&&(0,bi.findConstraint)(r,wi.StepConstraint),i=Math.abs((t=n==null?void 0:n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}j.getSuitableDraggingScale=kv;var sr={},ln={};Object.defineProperty(ln,"__esModule",{value:!0});ln.CheckboxView=void 0;var Tv=U,jv=O,Sr=(0,jv.ClassName)("ckb"),Rv=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Sr()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("label");n.classList.add(Sr("l")),this.element.appendChild(n);var i=e.createElement("input");i.classList.add(Sr("i")),i.type="checkbox",n.appendChild(i),this.inputElement=i,t.viewProps.bindDisabled(this.inputElement);var o=e.createElement("div");o.classList.add(Sr("w")),n.appendChild(o);var a=(0,Tv.createSvgIconElement)(e,"check");o.appendChild(a),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return r.prototype.update_=function(){this.inputElement.checked=this.value.rawValue},r.prototype.onValueChange_=function(){this.update_()},r}();ln.CheckboxView=Rv;Object.defineProperty(sr,"__esModule",{value:!0});sr.CheckboxController=void 0;var Av=E,Nv=ln,Lv=function(){function r(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Nv.CheckboxView(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return r.prototype.onInputChange_=function(e){var t=(0,Av.forceCast)(e.currentTarget);this.value.rawValue=t.checked},r}();sr.CheckboxController=Lv;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.BooleanInputPlugin=void 0;var Ba=re,Bv=Me,Fv=De,Dv=ae,Iv=T,yo=L,Kv=xe,Fa=j,Uv=sr;function Hv(r){var e=[],t=(0,Fa.createListConstraint)(r.options);return t&&e.push(t),new Ba.CompositeConstraint(e)}ur.BooleanInputPlugin={id:"input-bool",type:"input",accept:function(r,e){if(typeof r!="boolean")return null;var t=yo.ParamsParsers,n=(0,yo.parseParams)(e,{options:t.optional.custom(Fa.parseListOptions)});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return Dv.boolFromUnknown},constraint:function(r){return Hv(r.params)},writer:function(r){return Kv.writePrimitive}},controller:function(r){var e=r.document,t=r.value,n=r.constraint,i=n&&(0,Ba.findConstraint)(n,Bv.ListConstraint);return i?new Fv.ListController(e,{props:new Iv.ValueMap({options:i.values.value("options")}),value:t,viewProps:r.viewProps}):new Uv.CheckboxController(e,{value:t,viewProps:r.viewProps})}};var Ie={},sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.ColorView=void 0;var Gv=D,qv=O,zv=J,ke=(0,qv.ClassName)("col"),Wv=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(ke()),t.foldable.bindExpandedClass(this.element,ke(void 0,"expanded")),(0,Gv.bindValueMap)(t.foldable,"completed",(0,zv.valueToClassName)(this.element,ke(void 0,"cpl")));var n=e.createElement("div");n.classList.add(ke("h")),this.element.appendChild(n);var i=e.createElement("div");i.classList.add(ke("s")),n.appendChild(i),this.swatchElement=i;var o=e.createElement("div");if(o.classList.add(ke("t")),n.appendChild(o),this.textElement=o,t.pickerLayout==="inline"){var a=e.createElement("div");a.classList.add(ke("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}return r}();sn.ColorView=Wv;var un={},q={},A={};Object.defineProperty(A,"__esModule",{value:!0});A.convertColor=A.constrainColorComponents=A.getColorMaxComponents=A.appendAlphaComponent=A.removeAlphaComponent=A.hsvToHslInt=A.hslToHsvInt=A.hsvToRgbInt=void 0;var H=k;function Yv(r,e,t){var n=(0,H.constrainRange)(r/255,0,1),i=(0,H.constrainRange)(e/255,0,1),o=(0,H.constrainRange)(t/255,0,1),a=Math.max(n,i,o),l=Math.min(n,i,o),s=a-l,p=0,m=0,c=(l+a)/2;return s!==0&&(m=s/(1-Math.abs(a+l-1)),n===a?p=(i-o)/s:i===a?p=2+(o-n)/s:p=4+(n-i)/s,p=p/6+(p<0?1:0)),[p*360,m*100,c*100]}function Xv(r,e,t){var n,i,o,a,l,s,p=(r%360+360)%360,m=(0,H.constrainRange)(e/100,0,1),c=(0,H.constrainRange)(t/100,0,1),d=(1-Math.abs(2*c-1))*m,w=d*(1-Math.abs(p/60%2-1)),C=c-d/2,P,f,b;return p>=0&&p<60?(n=[d,w,0],P=n[0],f=n[1],b=n[2]):p>=60&&p<120?(i=[w,d,0],P=i[0],f=i[1],b=i[2]):p>=120&&p<180?(o=[0,d,w],P=o[0],f=o[1],b=o[2]):p>=180&&p<240?(a=[0,w,d],P=a[0],f=a[1],b=a[2]):p>=240&&p<300?(l=[w,0,d],P=l[0],f=l[1],b=l[2]):(s=[d,0,w],P=s[0],f=s[1],b=s[2]),[(P+C)*255,(f+C)*255,(b+C)*255]}function Jv(r,e,t){var n=(0,H.constrainRange)(r/255,0,1),i=(0,H.constrainRange)(e/255,0,1),o=(0,H.constrainRange)(t/255,0,1),a=Math.max(n,i,o),l=Math.min(n,i,o),s=a-l,p;s===0?p=0:a===n?p=60*(((i-o)/s%6+6)%6):a===i?p=60*((o-n)/s+2):p=60*((n-i)/s+4);var m=a===0?0:s/a,c=a;return[p,m*100,c*100]}function Da(r,e,t){var n,i,o,a,l,s,p=(0,H.loopRange)(r,360),m=(0,H.constrainRange)(e/100,0,1),c=(0,H.constrainRange)(t/100,0,1),d=c*m,w=d*(1-Math.abs(p/60%2-1)),C=c-d,P,f,b;return p>=0&&p<60?(n=[d,w,0],P=n[0],f=n[1],b=n[2]):p>=60&&p<120?(i=[w,d,0],P=i[0],f=i[1],b=i[2]):p>=120&&p<180?(o=[0,d,w],P=o[0],f=o[1],b=o[2]):p>=180&&p<240?(a=[0,w,d],P=a[0],f=a[1],b=a[2]):p>=240&&p<300?(l=[w,0,d],P=l[0],f=l[1],b=l[2]):(s=[d,0,w],P=s[0],f=s[1],b=s[2]),[(P+C)*255,(f+C)*255,(b+C)*255]}A.hsvToRgbInt=Da;function Ia(r,e,t){var n=t+e*(100-Math.abs(2*t-100))/200;return[r,n!==0?e*(100-Math.abs(2*t-100))/n:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}A.hslToHsvInt=Ia;function Ka(r,e,t){var n=100-Math.abs(t*(200-e)/100-100);return[r,n!==0?e*t/n:0,t*(200-e)/(2*100)]}A.hsvToHslInt=Ka;function Zv(r){return[r[0],r[1],r[2]]}A.removeAlphaComponent=Zv;function Qv(r,e){return[r[0],r[1],r[2],e]}A.appendAlphaComponent=Qv;var eh={hsl:{hsl:function(r,e,t){return[r,e,t]},hsv:Ia,rgb:Xv},hsv:{hsl:Ka,hsv:function(r,e,t){return[r,e,t]},rgb:Da},rgb:{hsl:Yv,hsv:Jv,rgb:function(r,e,t){return[r,e,t]}}};function qr(r,e){return[e==="float"?1:r==="rgb"?255:360,e==="float"?1:r==="rgb"?255:100,e==="float"?1:r==="rgb"?255:100]}A.getColorMaxComponents=qr;function th(r,e){return r===e?e:(0,H.loopRange)(r,e)}function rh(r,e,t){var n,i=qr(e,t);return[e==="rgb"?(0,H.constrainRange)(r[0],0,i[0]):th(r[0],i[0]),(0,H.constrainRange)(r[1],0,i[1]),(0,H.constrainRange)(r[2],0,i[2]),(0,H.constrainRange)((n=r[3])!==null&&n!==void 0?n:1,0,1)]}A.constrainColorComponents=rh;function Co(r,e,t,n){var i=qr(e,t),o=qr(e,n);return r.map(function(a,l){return a/i[l]*o[l]})}function nh(r,e,t){var n,i=Co(r,e.mode,e.type,"int"),o=(n=eh[e.mode])[t.mode].apply(n,i);return Co(o,t.mode,"int",t.type)}A.convertColor=nh;Object.defineProperty(q,"__esModule",{value:!0});q.Color=void 0;var ih=E,Or=A;function Mr(r,e){return typeof r!="object"||(0,ih.isEmpty)(r)?!1:e in r&&typeof r[e]=="number"}var oh=function(){function r(e,t,n){n===void 0&&(n="int"),this.mode=t,this.type=n,this.comps_=(0,Or.constrainColorComponents)(e,t,n)}return r.black=function(e){return e===void 0&&(e="int"),new r([0,0,0],"rgb",e)},r.fromObject=function(e,t){t===void 0&&(t="int");var n="a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b];return new r(n,"rgb",t)},r.toRgbaObject=function(e,t){return t===void 0&&(t="int"),e.toRgbaObject(t)},r.isRgbColorObject=function(e){return Mr(e,"r")&&Mr(e,"g")&&Mr(e,"b")},r.isRgbaColorObject=function(e){return this.isRgbColorObject(e)&&Mr(e,"a")},r.isColorObject=function(e){return this.isRgbColorObject(e)},r.equals=function(e,t){if(e.mode!==t.mode)return!1;for(var n=e.comps_,i=t.comps_,o=0;o<n.length;o++)if(n[o]!==i[o])return!1;return!0},r.prototype.getComponents=function(e,t){return t===void 0&&(t="int"),(0,Or.appendAlphaComponent)((0,Or.convertColor)((0,Or.removeAlphaComponent)(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:t}),this.comps_[3])},r.prototype.toRgbaObject=function(e){e===void 0&&(e="int");var t=this.getComponents("rgb",e);return{r:t[0],g:t[1],b:t[2],a:t[3]}},r}();q.Color=oh;var pn={},ah=g&&g.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(pn,"__esModule",{value:!0});pn.ColorPickerView=void 0;var lh=O,me=(0,lh.ClassName)("colp"),sh=function(){function r(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(me()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(me("hsv"));var i=e.createElement("div");i.classList.add(me("sv")),this.svPaletteView_=t.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);var o=e.createElement("div");o.classList.add(me("h")),this.hPaletteView_=t.hPaletteView,o.appendChild(this.hPaletteView_.element),n.appendChild(o),this.element.appendChild(n);var a=e.createElement("div");if(a.classList.add(me("rgb")),this.textView_=t.textView,a.appendChild(this.textView_.element),this.element.appendChild(a),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};var l=e.createElement("div");l.classList.add(me("a"));var s=e.createElement("div");s.classList.add(me("ap")),s.appendChild(this.alphaViews_.palette.element),l.appendChild(s);var p=e.createElement("div");p.classList.add(me("at")),p.appendChild(this.alphaViews_.text.element),l.appendChild(p),this.element.appendChild(l)}}return Object.defineProperty(r.prototype,"allFocusableElements",{get:function(){var e=ah([this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement],this.textView_.textViews.map(function(t){return t.inputElement}),!0);return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e},enumerable:!1,configurable:!0}),r}();pn.ColorPickerView=sh;var dn={},X={};Object.defineProperty(X,"__esModule",{value:!0});X.extractColorType=X.getBaseStepForColor=X.parseColorInputParams=void 0;var Po=L,uh=j;function ph(r){return r==="int"?"int":r==="float"?"float":void 0}function dh(r){var e=Po.ParamsParsers;return(0,Po.parseParams)(r,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(ph)}),expanded:e.optional.boolean,picker:e.optional.custom(uh.parsePickerLayout)})}X.parseColorInputParams=dh;function ch(r){return r?.1:1}X.getBaseStepForColor=ch;function vh(r){var e;return(e=r.color)===null||e===void 0?void 0:e.type}X.extractColorType=vh;var cn={},_e={};(function(r){var e=g&&g.__assign||function(){return e=Object.assign||function(v){for(var u,h=1,V=arguments.length;h<V;h++){u=arguments[h];for(var $ in u)Object.prototype.hasOwnProperty.call(u,$)&&(v[$]=u[$])}return v},e.apply(this,arguments)},t=g&&g.__spreadArray||function(v,u,h){if(h||arguments.length===2)for(var V=0,$=u.length,Q;V<$;V++)(Q||!(V in u))&&(Q||(Q=Array.prototype.slice.call(u,0,V)),Q[V]=u[V]);return v.concat(Q||Array.prototype.slice.call(u))};Object.defineProperty(r,"__esModule",{value:!0}),r.findColorStringifier=r.getColorStringifier=r.colorToObjectRgbaString=r.colorToObjectRgbString=r.colorToFunctionalHslaString=r.colorToFunctionalHslString=r.colorToFunctionalRgbaString=r.colorToFunctionalRgbString=r.colorToHexRgbaString=r.colorToHexRgbString=r.colorFromString=r.hasAlphaComponent=r.createColorStringParser=r.createColorStringBindingReader=r.CompositeColorParser=r.detectStringColorFormat=r.getColorNotation=void 0;var n=F,i=rr,o=k,a=q,l=A;function s(v,u){return v.alpha===u.alpha&&v.mode===u.mode&&v.notation===u.notation&&v.type===u.type}function p(v,u){var h=v.match(/^(.+)%$/);return Math.min(h?parseFloat(h[1])*.01*u:parseFloat(v),u)}var m={deg:function(v){return v},grad:function(v){return v*360/400},rad:function(v){return v*360/(2*Math.PI)},turn:function(v){return v*360}};function c(v){var u=v.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!u)return parseFloat(v);var h=parseFloat(u[1]),V=u[2];return m[V](h)}function d(v){var u=v.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!u)return null;var h=[p(u[1],255),p(u[2],255),p(u[3],255)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function w(v){return function(u){var h=d(u);return h?new a.Color(h,"rgb",v):null}}function C(v){var u=v.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!u)return null;var h=[p(u[1],255),p(u[2],255),p(u[3],255),p(u[4],1)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function P(v){return function(u){var h=C(u);return h?new a.Color(h,"rgb",v):null}}function f(v){var u=v.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!u)return null;var h=[c(u[1]),p(u[2],100),p(u[3],100)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function b(v){return function(u){var h=f(u);return h?new a.Color(h,"hsl",v):null}}function _(v){var u=v.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!u)return null;var h=[c(u[1]),p(u[2],100),p(u[3],100),p(u[4],1)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function y(v){return function(u){var h=_(u);return h?new a.Color(h,"hsl",v):null}}function M(v){var u=v.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(u)return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)];var h=v.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return h?[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]:null}function S(v){var u=M(v);return u?new a.Color(u,"rgb","int"):null}function R(v){var u=v.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(u)return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16),(0,o.mapRange)(parseInt(u[4]+u[4],16),0,255,0,1)];var h=v.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return h?[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16),(0,o.mapRange)(parseInt(h[4],16),0,255,0,1)]:null}function ie(v){var u=R(v);return u?new a.Color(u,"rgb","int"):null}function yi(v){var u=v.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!u)return null;var h=[parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function Ci(v){return function(u){var h=yi(u);return h?new a.Color(h,"rgb",v):null}}function Pi(v){var u=v.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!u)return null;var h=[parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]),parseFloat(u[4])];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function Ei(v){return function(u){var h=Pi(u);return h?new a.Color(h,"rgb",v):null}}var kn={"func.rgb":w("int"),"func.rgba":P("int"),"func.hsl":b("int"),"func.hsla":y("int"),"hex.rgb":S,"hex.rgba":ie};function Vi(v){var u=Object.keys(kn);return u.reduce(function(h,V){if(h)return h;var $=kn[V];return $(v)?V:null},null)}r.getColorNotation=Vi;var ll=[{parser:M,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:R,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:d,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:C,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:f,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:_,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:yi,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Pi,result:{alpha:!0,mode:"rgb",notation:"object"}}];function sl(v){return ll.reduce(function(u,h){var V=h.parser,$=h.result;return u||(V(v)?$:null)},null)}function ul(v,u){u===void 0&&(u="int");var h=sl(v);return h?h.notation==="hex"&&u!=="float"?e(e({},h),{type:"int"}):h.notation==="func"?e(e({},h),{type:u}):null:null}r.detectStringColorFormat=ul;var pl=function(v){var u=Vi(v);return u?kn[u](v):null};r.CompositeColorParser=pl;var Si={int:[S,ie,w("int"),P("int"),b("int"),y("int"),Ci("int"),Ei("int")],float:[w("float"),P("float"),b("float"),y("float"),Ci("float"),Ei("float")]};function dl(v){var u=Si[v];return function(h){if(typeof h!="string")return a.Color.black(v);var V=u.reduce(function($,Q){return $||Q(h)},null);return V??a.Color.black(v)}}r.createColorStringBindingReader=dl;function cl(v){var u=Si[v];return function(h){return u.reduce(function(V,$){return V||$(h)},null)}}r.createColorStringParser=cl;function vl(v){return v==="func.hsla"||v==="func.rgba"||v==="hex.rgba"}r.hasAlphaComponent=vl;function hl(v){if(typeof v=="string"){var u=(0,r.CompositeColorParser)(v);if(u)return u}return a.Color.black()}r.colorFromString=hl;function Oi(v){var u=(0,o.constrainRange)(Math.floor(v),0,255).toString(16);return u.length===1?"0".concat(u):u}function Tn(v,u){u===void 0&&(u="#");var h=(0,l.removeAlphaComponent)(v.getComponents("rgb")).map(Oi).join("");return"".concat(u).concat(h)}r.colorToHexRgbString=Tn;function jn(v,u){u===void 0&&(u="#");var h=v.getComponents("rgb"),V=[h[0],h[1],h[2],h[3]*255].map(Oi).join("");return"".concat(u).concat(V)}r.colorToHexRgbaString=jn;function Rn(v,u){var h=(0,n.createNumberFormatter)(u==="float"?2:0),V=(0,l.removeAlphaComponent)(v.getComponents("rgb",u)).map(function($){return h($)});return"rgb(".concat(V.join(", "),")")}r.colorToFunctionalRgbString=Rn;function fl(v){return function(u){return Rn(u,v)}}function An(v,u){var h=(0,n.createNumberFormatter)(2),V=(0,n.createNumberFormatter)(u==="float"?2:0),$=v.getComponents("rgb",u).map(function(Q,ut){var gr=ut===3?h:V;return gr(Q)});return"rgba(".concat($.join(", "),")")}r.colorToFunctionalRgbaString=An;function _l(v){return function(u){return An(u,v)}}function Nn(v){var u=[(0,n.createNumberFormatter)(0),i.formatPercentage,i.formatPercentage],h=(0,l.removeAlphaComponent)(v.getComponents("hsl")).map(function(V,$){return u[$](V)});return"hsl(".concat(h.join(", "),")")}r.colorToFunctionalHslString=Nn;function Ln(v){var u=[(0,n.createNumberFormatter)(0),i.formatPercentage,i.formatPercentage,(0,n.createNumberFormatter)(2)],h=v.getComponents("hsl").map(function(V,$){return u[$](V)});return"hsla(".concat(h.join(", "),")")}r.colorToFunctionalHslaString=Ln;function Mi(v,u){var h=(0,n.createNumberFormatter)(u==="float"?2:0),V=["r","g","b"],$=(0,l.removeAlphaComponent)(v.getComponents("rgb",u)).map(function(Q,ut){return"".concat(V[ut],": ").concat(h(Q))});return"{".concat($.join(", "),"}")}r.colorToObjectRgbString=Mi;function ml(v){return function(u){return Mi(u,v)}}function xi(v,u){var h=(0,n.createNumberFormatter)(2),V=(0,n.createNumberFormatter)(u==="float"?2:0),$=["r","g","b","a"],Q=v.getComponents("rgb",u).map(function(ut,gr){var Pl=gr===3?h:V;return"".concat($[gr],": ").concat(Pl(ut))});return"{".concat(Q.join(", "),"}")}r.colorToObjectRgbaString=xi;function bl(v){return function(u){return xi(u,v)}}var wl={"func.hsl":Nn,"func.hsla":Ln,"func.rgb":Rn,"func.rgba":An,"hex.rgb":Tn,"hex.rgba":jn};function gl(v){return wl[v]}r.getColorStringifier=gl;var yl=t([{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Tn},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:jn},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Nn},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Ln}],["int","float"].reduce(function(v,u){return t(t([],v,!0),[{format:{alpha:!1,mode:"rgb",notation:"func",type:u},stringifier:fl(u)},{format:{alpha:!0,mode:"rgb",notation:"func",type:u},stringifier:_l(u)},{format:{alpha:!1,mode:"rgb",notation:"object",type:u},stringifier:ml(u)},{format:{alpha:!0,mode:"rgb",notation:"object",type:u},stringifier:bl(u)}],!1)},[]),!0);function Cl(v){return yl.reduce(function(u,h){return u||(s(h.format,v)?h.stringifier:null)},null)}r.findColorStringifier=Cl})(_e);Object.defineProperty(cn,"__esModule",{value:!0});cn.APaletteView=void 0;var hh=k,fh=O,zn=_e,Eo=q,_t=(0,fh.ClassName)("apl"),_h=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(_t()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add(_t("b")),this.element.appendChild(n);var i=e.createElement("div");i.classList.add(_t("c")),n.appendChild(i),this.colorElem_=i;var o=e.createElement("div");o.classList.add(_t("m")),this.element.appendChild(o),this.markerElem_=o;var a=e.createElement("div");a.classList.add(_t("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}return r.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("rgb"),n=new Eo.Color([t[0],t[1],t[2],0],"rgb"),i=new Eo.Color([t[0],t[1],t[2],255],"rgb"),o=["to right",(0,zn.colorToFunctionalRgbaString)(n),(0,zn.colorToFunctionalRgbaString)(i)];this.colorElem_.style.background="linear-gradient(".concat(o.join(","),")"),this.previewElem_.style.backgroundColor=(0,zn.colorToFunctionalRgbaString)(e);var a=(0,hh.mapRange)(t[3],0,1,0,100);this.markerElem_.style.left="".concat(a,"%")},r.prototype.onValueChange_=function(){this.update_()},r}();cn.APaletteView=_h;Object.defineProperty(dn,"__esModule",{value:!0});dn.APaletteController=void 0;var xr=K,mh=ne,Vo=q,So=X,bh=cn,wh=function(){function r(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new bh.APaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new mh.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=e.point.x/e.bounds.width,i=this.value.rawValue,o=i.getComponents("hsv"),a=o[0],l=o[1],s=o[2];this.value.setRawValue(new Vo.Color([a,l,s,n],"hsv"),t)}},r.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onKeyDown_=function(e){var t=(0,xr.getStepForKey)((0,So.getBaseStepForColor)(!0),(0,xr.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,i=n.getComponents("hsv"),o=i[0],a=i[1],l=i[2],s=i[3];this.value.setRawValue(new Vo.Color([o,a,l,s+t],"hsv"),{forceEmit:!1,last:!1})}},r.prototype.onKeyUp_=function(e){var t=(0,xr.getStepForKey)((0,So.getBaseStepForColor)(!0),(0,xr.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();dn.APaletteController=wh;var vn={},hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.ColorTextView=void 0;var Oo=U,gh=D,yh=O,qe=(0,yh.ClassName)("coltxt");function Ch(r){var e=r.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(t.reduce(function(n,i){var o=r.createElement("option");return o.textContent=i.text,o.value=i.value,n.appendChild(o),n},r.createDocumentFragment())),e}var Ph=function(){function r(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(qe()),t.viewProps.bindClassModifiers(this.element);var i=e.createElement("div");i.classList.add(qe("m")),this.modeElem_=Ch(e),this.modeElem_.classList.add(qe("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);var o=e.createElement("div");o.classList.add(qe("mm")),o.appendChild((0,Oo.createSvgIconElement)(e,"dropdown")),i.appendChild(o),this.element.appendChild(i);var a=e.createElement("div");a.classList.add(qe("w")),this.element.appendChild(a),this.textsElem_=a,this.textViews_=t.textViews,this.applyTextViews_(),(0,gh.bindValue)(t.colorMode,function(l){n.modeElem_.value=l})}return Object.defineProperty(r.prototype,"modeSelectElement",{get:function(){return this.modeElem_},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textViews",{get:function(){return this.textViews_},set:function(e){this.textViews_=e,this.applyTextViews_()},enumerable:!1,configurable:!0}),r.prototype.applyTextViews_=function(){var e=this;(0,Oo.removeChildElements)(this.textsElem_);var t=this.element.ownerDocument;this.textViews_.forEach(function(n){var i=t.createElement("div");i.classList.add(qe("c")),i.appendChild(n.element),e.textsElem_.appendChild(i)})},r}();hn.ColorTextView=Ph;Object.defineProperty(vn,"__esModule",{value:!0});vn.ColorTextController=void 0;var Eh=Fe,Vh=F,Sh=T,Oh=he,Ua=G,Mh=fe,xh=q,li=A,$h=X,kh=hn;function Th(r){return(0,Vh.createNumberFormatter)(r==="float"?2:0)}function jh(r,e,t){var n=(0,li.getColorMaxComponents)(r,e)[t];return new Eh.DefiniteRangeConstraint({min:0,max:n})}function Wn(r,e,t){return new Mh.NumberTextController(r,{arrayPosition:t===0?"fst":t===3-1?"lst":"mid",baseStep:(0,$h.getBaseStepForColor)(!1),parser:e.parser,props:Sh.ValueMap.fromObject({draggingScale:e.colorType==="float"?.01:1,formatter:Th(e.colorType)}),value:(0,Ua.createValue)(0,{constraint:jh(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}var Rh=function(){function r(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.parser_=t.parser,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=(0,Ua.createValue)(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new kh.ColorTextView(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return r.prototype.createComponentControllers_=function(e){var t=this,n={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},i=[Wn(e,n,0),Wn(e,n,1),Wn(e,n,2)];return i.forEach(function(o,a){(0,Oh.connectValues)({primary:t.value,secondary:o.value,forward:function(l){return l.rawValue.getComponents(t.colorMode.rawValue,t.colorType_)[a]},backward:function(l,s){var p=t.colorMode.rawValue,m=l.rawValue.getComponents(p,t.colorType_);return m[a]=s.rawValue,new xh.Color((0,li.appendAlphaComponent)((0,li.removeAlphaComponent)(m),m[3]),p,t.colorType_)}})}),i},r.prototype.onModeSelectChange_=function(e){var t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]},r}();vn.ColorTextController=Rh;var fn={},_n={};Object.defineProperty(_n,"__esModule",{value:!0});_n.HPaletteView=void 0;var Ah=k,Nh=O,Lh=_e,Bh=q,Yn=(0,Nh.ClassName)("hpl"),Fh=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Yn()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add(Yn("c")),this.element.appendChild(n);var i=e.createElement("div");i.classList.add(Yn("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return r.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("hsv")[0];this.markerElem_.style.backgroundColor=(0,Lh.colorToFunctionalRgbString)(new Bh.Color([t,100,100],"hsv"));var n=(0,Ah.mapRange)(t,0,360,0,100);this.markerElem_.style.left="".concat(n,"%")},r.prototype.onValueChange_=function(){this.update_()},r}();_n.HPaletteView=Fh;Object.defineProperty(fn,"__esModule",{value:!0});fn.HPaletteController=void 0;var Mo=k,$r=K,Dh=ne,xo=q,$o=X,Ih=_n,Kh=function(){function r(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Ih.HPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dh.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,Mo.mapRange)((0,Mo.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,o=i.getComponents("hsv"),a=o[1],l=o[2],s=o[3];this.value.setRawValue(new xo.Color([n,a,l,s],"hsv"),t)}},r.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onKeyDown_=function(e){var t=(0,$r.getStepForKey)((0,$o.getBaseStepForColor)(!1),(0,$r.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,i=n.getComponents("hsv"),o=i[0],a=i[1],l=i[2],s=i[3];this.value.setRawValue(new xo.Color([o+t,a,l,s],"hsv"),{forceEmit:!1,last:!1})}},r.prototype.onKeyUp_=function(e){var t=(0,$r.getStepForKey)((0,$o.getBaseStepForColor)(!1),(0,$r.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();fn.HPaletteController=Kh;var mn={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.SvPaletteView=void 0;var Uh=U,kr=k,Hh=O,Gh=A,Xn=(0,Hh.ClassName)("svp"),ko=64,qh=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Xn()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("canvas");n.height=ko,n.width=ko,n.classList.add(Xn("c")),this.element.appendChild(n),this.canvasElement=n;var i=e.createElement("div");i.classList.add(Xn("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return r.prototype.update_=function(){var e=(0,Uh.getCanvasContext)(this.canvasElement);if(e){for(var t=this.value.rawValue,n=t.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,a=e.getImageData(0,0,i,o),l=a.data,s=0;s<o;s++)for(var p=0;p<i;p++){var m=(0,kr.mapRange)(p,0,i,0,100),c=(0,kr.mapRange)(s,0,o,100,0),d=(0,Gh.hsvToRgbInt)(n[0],m,c),w=(s*i+p)*4;l[w]=d[0],l[w+1]=d[1],l[w+2]=d[2],l[w+3]=255}e.putImageData(a,0,0);var C=(0,kr.mapRange)(n[1],0,100,0,100);this.markerElem_.style.left="".concat(C,"%");var P=(0,kr.mapRange)(n[2],0,100,100,0);this.markerElem_.style.top="".concat(P,"%")}},r.prototype.onValueChange_=function(){this.update_()},r}();bn.SvPaletteView=qh;Object.defineProperty(mn,"__esModule",{value:!0});mn.SvPaletteController=void 0;var To=k,ue=K,zh=ne,jo=q,Ro=X,Wh=bn,Yh=function(){function r(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Wh.SvPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new zh.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,To.mapRange)(e.point.x,0,e.bounds.width,0,100),i=(0,To.mapRange)(e.point.y,0,e.bounds.height,100,0),o=this.value.rawValue.getComponents("hsv"),a=o[0],l=o[3];this.value.setRawValue(new jo.Color([a,n,i,l],"hsv"),t)}},r.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onKeyDown_=function(e){(0,ue.isArrowKey)(e.key)&&e.preventDefault();var t=this.value.rawValue.getComponents("hsv"),n=t[0],i=t[1],o=t[2],a=t[3],l=(0,Ro.getBaseStepForColor)(!1),s=(0,ue.getStepForKey)(l,(0,ue.getHorizontalStepKeys)(e)),p=(0,ue.getStepForKey)(l,(0,ue.getVerticalStepKeys)(e));s===0&&p===0||this.value.setRawValue(new jo.Color([n,i+s,o+p,a],"hsv"),{forceEmit:!1,last:!1})},r.prototype.onKeyUp_=function(e){var t=(0,Ro.getBaseStepForColor)(!1),n=(0,ue.getStepForKey)(t,(0,ue.getHorizontalStepKeys)(e)),i=(0,ue.getStepForKey)(t,(0,ue.getVerticalStepKeys)(e));n===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();mn.SvPaletteController=Yh;Object.defineProperty(un,"__esModule",{value:!0});un.ColorPickerController=void 0;var Xh=Fe,Jn=F,Jh=T,Zh=he,Qh=G,ef=fe,tf=q,rf=pn,nf=dn,of=vn,af=fn,lf=mn,sf=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new af.HPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new lf.SvPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new nf.APaletteController(e,{value:this.value,viewProps:this.viewProps}),text:new ef.NumberTextController(e,{parser:Jn.parseNumber,baseStep:.1,props:Jh.ValueMap.fromObject({draggingScale:.01,formatter:(0,Jn.createNumberFormatter)(2)}),value:(0,Qh.createValue)(0,{constraint:new Xh.DefiniteRangeConstraint({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&(0,Zh.connectValues)({primary:this.value,secondary:this.alphaIcs_.text.value,forward:function(n){return n.rawValue.getComponents()[3]},backward:function(n,i){var o=n.rawValue.getComponents();return o[3]=i.rawValue,new tf.Color(o,n.rawValue.mode)}}),this.textC_=new of.ColorTextController(e,{colorType:t.colorType,parser:Jn.parseNumber,value:this.value,viewProps:this.viewProps}),this.view=new rf.ColorPickerView(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}return Object.defineProperty(r.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),r}();un.ColorPickerController=sf;var wn={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.ColorSwatchView=void 0;var uf=O,pf=_e,Zn=(0,uf.ClassName)("colsw"),df=function(){function r(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(Zn()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(Zn("sw")),this.element.appendChild(n),this.swatchElem_=n;var i=e.createElement("button");i.classList.add(Zn("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}return r.prototype.update_=function(){var e=this.value.rawValue;this.swatchElem_.style.backgroundColor=(0,pf.colorToHexRgbaString)(e)},r.prototype.onValueChange_=function(){this.update_()},r}();gn.ColorSwatchView=df;Object.defineProperty(wn,"__esModule",{value:!0});wn.ColorSwatchController=void 0;var cf=gn,vf=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new cf.ColorSwatchView(e,{value:this.value,viewProps:this.viewProps})}return r}();wn.ColorSwatchController=vf;Object.defineProperty(Ie,"__esModule",{value:!0});Ie.ColorController=void 0;var Ao=W,hf=lt,ff=st,No=U,_f=T,mf=he,bf=E,wf=sn,gf=un,yf=wn,Cf=function(){function r(e,t){var n=this;this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Ao.Foldable.create(t.expanded),this.swatchC_=new yf.ColorSwatchController(e,{value:this.value,viewProps:this.viewProps});var i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new ff.TextController(e,{parser:t.parser,props:_f.ValueMap.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new wf.ColorView(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new hf.PopupController(e,{viewProps:this.viewProps}):null;var o=new gf.ColorPickerController(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(function(a){a.addEventListener("blur",n.onPopupChildBlur_),a.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),(0,mf.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(a){return a.rawValue},backward:function(a,l){return l.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,Ao.bindFoldable)(this.foldable_,this.view.pickerElement))}return Object.defineProperty(r.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),r.prototype.onButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,bf.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},r.prototype.onButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},r.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,No.findNextTarget)(e);n&&t.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!(0,No.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},r.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()},r}();Ie.ColorController=Cf;var B={};Object.defineProperty(B,"__esModule",{value:!0});B.colorFromRgbaNumber=B.colorFromRgbNumber=B.numberToRgbaColor=B.numberToRgbColor=B.colorToRgbaNumber=B.colorToRgbNumber=B.colorFromObject=void 0;var Pf=k,Re=q,Ef=A;function Vf(r,e){return Re.Color.isColorObject(r)?Re.Color.fromObject(r,e):Re.Color.black(e)}B.colorFromObject=Vf;function Sf(r){return(0,Ef.removeAlphaComponent)(r.getComponents("rgb")).reduce(function(e,t){return e<<8|Math.floor(t)&255},0)}B.colorToRgbNumber=Sf;function Of(r){return r.getComponents("rgb").reduce(function(e,t,n){var i=Math.floor(n===3?t*255:t)&255;return e<<8|i},0)>>>0}B.colorToRgbaNumber=Of;function Ha(r){return new Re.Color([r>>16&255,r>>8&255,r&255],"rgb")}B.numberToRgbColor=Ha;function Ga(r){return new Re.Color([r>>24&255,r>>16&255,r>>8&255,(0,Pf.mapRange)(r&255,0,255,0,1)],"rgb")}B.numberToRgbaColor=Ga;function Mf(r){return typeof r!="number"?Re.Color.black():Ha(r)}B.colorFromRgbNumber=Mf;function xf(r){return typeof r!="number"?Re.Color.black():Ga(r)}B.colorFromRgbaNumber=xf;var pr={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.createColorObjectWriter=Y.writeRgbColorObject=Y.writeRgbaColorObject=Y.createColorNumberWriter=Y.createColorStringWriter=void 0;var qa=xe,Lo=B,$f=_e;function kf(r){var e=(0,$f.findColorStringifier)(r);return e?function(t,n){(0,qa.writePrimitive)(t,e(n))}:null}Y.createColorStringWriter=kf;function Tf(r){var e=r?Lo.colorToRgbaNumber:Lo.colorToRgbNumber;return function(t,n){(0,qa.writePrimitive)(t,e(n))}}Y.createColorNumberWriter=Tf;function za(r,e,t){var n=e.toRgbaObject(t);r.writeProperty("r",n.r),r.writeProperty("g",n.g),r.writeProperty("b",n.b),r.writeProperty("a",n.a)}Y.writeRgbaColorObject=za;function Wa(r,e,t){var n=e.toRgbaObject(t);r.writeProperty("r",n.r),r.writeProperty("g",n.g),r.writeProperty("b",n.b)}Y.writeRgbColorObject=Wa;function jf(r,e){return function(t,n){r?za(t,n,e):Wa(t,n,e)}}Y.createColorObjectWriter=jf;Object.defineProperty(pr,"__esModule",{value:!0});pr.NumberColorInputPlugin=void 0;var Rf=Ie,Bo=B,si=_e,Af=Y,Nf=q,Lf=X;function Qn(r){var e;return!!(r!=null&&r.alpha||!((e=r==null?void 0:r.color)===null||e===void 0)&&e.alpha)}function Bf(r){return r?function(e){return(0,si.colorToHexRgbaString)(e,"0x")}:function(e){return(0,si.colorToHexRgbString)(e,"0x")}}function Ff(r){return"color"in r||"view"in r&&r.view==="color"}pr.NumberColorInputPlugin={id:"input-color-number",type:"input",accept:function(r,e){if(typeof r!="number"||!Ff(e))return null;var t=(0,Lf.parseColorInputParams)(e);return t?{initialValue:r,params:t}:null},binding:{reader:function(r){return Qn(r.params)?Bo.colorFromRgbaNumber:Bo.colorFromRgbNumber},equals:Nf.Color.equals,writer:function(r){return(0,Af.createColorNumberWriter)(Qn(r.params))}},controller:function(r){var e=Qn(r.params),t="expanded"in r.params?r.params.expanded:void 0,n="picker"in r.params?r.params.picker:void 0;return new Rf.ColorController(r.document,{colorType:"int",expanded:t??!1,formatter:Bf(e),parser:(0,si.createColorStringParser)("int"),pickerLayout:n??"popup",supportsAlpha:e,value:r.value,viewProps:r.viewProps})}};var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.ObjectColorInputPlugin=void 0;var Df=Ie,If=B,ui=_e,Kf=Y,Dr=q,Tr=X;function Uf(r){return Dr.Color.isRgbaColorObject(r)}function Hf(r){return function(e){return(0,If.colorFromObject)(e,r)}}function Gf(r,e){return function(t){return r?(0,ui.colorToObjectRgbaString)(t,e):(0,ui.colorToObjectRgbString)(t,e)}}dr.ObjectColorInputPlugin={id:"input-color-object",type:"input",accept:function(r,e){if(!Dr.Color.isColorObject(r))return null;var t=(0,Tr.parseColorInputParams)(e);return t?{initialValue:r,params:t}:null},binding:{reader:function(r){return Hf((0,Tr.extractColorType)(r.params))},equals:Dr.Color.equals,writer:function(r){return(0,Kf.createColorObjectWriter)(Uf(r.initialValue),(0,Tr.extractColorType)(r.params))}},controller:function(r){var e,t=Dr.Color.isRgbaColorObject(r.initialValue),n="expanded"in r.params?r.params.expanded:void 0,i="picker"in r.params?r.params.picker:void 0,o=(e=(0,Tr.extractColorType)(r.params))!==null&&e!==void 0?e:"int";return new Df.ColorController(r.document,{colorType:o,expanded:n??!1,formatter:Gf(t,o),parser:(0,ui.createColorStringParser)(o),pickerLayout:i??"popup",supportsAlpha:t,value:r.value,viewProps:r.viewProps})}};var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.StringColorInputPlugin=void 0;var jr=Z,qf=Ie,Te=_e,zf=Y,Wf=q,mt=X;cr.StringColorInputPlugin={id:"input-color-string",type:"input",accept:function(r,e){if(typeof r!="string"||"view"in e&&e.view==="text")return null;var t=(0,Te.detectStringColorFormat)(r,(0,mt.extractColorType)(e));if(!t)return null;var n=(0,Te.findColorStringifier)(t);if(!n)return null;var i=(0,mt.parseColorInputParams)(e);return i?{initialValue:r,params:i}:null},binding:{reader:function(r){var e;return(0,Te.createColorStringBindingReader)((e=(0,mt.extractColorType)(r.params))!==null&&e!==void 0?e:"int")},equals:Wf.Color.equals,writer:function(r){var e=(0,Te.detectStringColorFormat)(r.initialValue,(0,mt.extractColorType)(r.params));if(!e)throw jr.TpError.shouldNeverHappen();var t=(0,zf.createColorStringWriter)(e);if(!t)throw jr.TpError.notBindable();return t}},controller:function(r){var e=(0,Te.detectStringColorFormat)(r.initialValue,(0,mt.extractColorType)(r.params));if(!e)throw jr.TpError.shouldNeverHappen();var t=(0,Te.findColorStringifier)(e);if(!t)throw jr.TpError.shouldNeverHappen();var n="expanded"in r.params?r.params.expanded:void 0,i="picker"in r.params?r.params.picker:void 0;return new qf.ColorController(r.document,{colorType:e.type,expanded:n??!1,formatter:t,parser:(0,Te.createColorStringParser)(e.type),pickerLayout:i??"popup",supportsAlpha:e.alpha,value:r.value,viewProps:r.viewProps})}};var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.PointNdConstraint=void 0;var Yf=function(){function r(e){this.components=e.components,this.asm_=e.assembly}return r.prototype.constrain=function(e){var t=this,n=this.asm_.toComponents(e).map(function(i,o){var a,l;return(l=(a=t.components[o])===null||a===void 0?void 0:a.constrain(i))!==null&&l!==void 0?l:i});return this.asm_.fromComponents(n)},r}();Ke.PointNdConstraint=Yf;var Ue={},yn={};Object.defineProperty(yn,"__esModule",{value:!0});yn.PointNdTextView=void 0;var Xf=O,Fo=(0,Xf.ClassName)("pndtxt"),Jf=function(){function r(e,t){var n=this;this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Fo()),this.textViews.forEach(function(i){var o=e.createElement("div");o.classList.add(Fo("a")),o.appendChild(i.element),n.element.appendChild(o)})}return r}();yn.PointNdTextView=Jf;Object.defineProperty(Ue,"__esModule",{value:!0});Ue.PointNdTextController=void 0;var Zf=he,Qf=G,e_=fe,t_=yn;function r_(r,e,t){return new e_.NumberTextController(r,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",baseStep:e.axes[t].baseStep,parser:e.parser,props:e.axes[t].textProps,value:(0,Qf.createValue)(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}var n_=function(){function r(e,t){var n=this;this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map(function(i,o){return r_(e,t,o)}),this.acs_.forEach(function(i,o){(0,Zf.connectValues)({primary:n.value,secondary:i.value,forward:function(a){return t.assembly.toComponents(a.rawValue)[o]},backward:function(a,l){var s=t.assembly.toComponents(a.rawValue);return s[o]=l.rawValue,t.assembly.fromComponents(s)}})}),this.view=new t_.PointNdTextView(e,{textViews:this.acs_.map(function(i){return i.view})})}return r}();Ue.PointNdTextController=n_;var te={};Object.defineProperty(te,"__esModule",{value:!0});te.NumberInputPlugin=te.findNumberRange=te.createRangeConstraint=te.createStepConstraint=void 0;var Vt=re,gi=Fe,i_=Me,Ya=Zt,o_=at,a_=De,Rr=F,Ar=T,l_=fe,s_=ar,Do=L,u_=xe,je=j,Ct=E;function Xa(r,e){return"step"in r&&!(0,Ct.isEmpty)(r.step)?new o_.StepConstraint(r.step,e):null}te.createStepConstraint=Xa;function Ja(r){return!(0,Ct.isEmpty)(r.max)&&!(0,Ct.isEmpty)(r.min)?new gi.DefiniteRangeConstraint({max:r.max,min:r.min}):!(0,Ct.isEmpty)(r.max)||!(0,Ct.isEmpty)(r.min)?new Ya.RangeConstraint({max:r.max,min:r.min}):null}te.createRangeConstraint=Ja;function p_(r){var e=(0,Vt.findConstraint)(r,gi.DefiniteRangeConstraint);if(e)return[e.values.get("min"),e.values.get("max")];var t=(0,Vt.findConstraint)(r,Ya.RangeConstraint);return t?[t.minValue,t.maxValue]:[void 0,void 0]}te.findNumberRange=p_;function d_(r,e){var t=[],n=Xa(r,e);n&&t.push(n);var i=Ja(r);i&&t.push(i);var o=(0,je.createListConstraint)(r.options);return o&&t.push(o),new Vt.CompositeConstraint(t)}te.NumberInputPlugin={id:"input-number",type:"input",accept:function(r,e){if(typeof r!="number")return null;var t=Do.ParamsParsers,n=(0,Do.parseParams)(e,{format:t.optional.function,max:t.optional.number,min:t.optional.number,options:t.optional.custom(je.parseListOptions),step:t.optional.number});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return Rr.numberFromUnknown},constraint:function(r){return d_(r.params,r.initialValue)},writer:function(r){return u_.writePrimitive}},controller:function(r){var e,t=r.value,n=r.constraint,i=n&&(0,Vt.findConstraint)(n,i_.ListConstraint);if(i)return new a_.ListController(r.document,{props:new Ar.ValueMap({options:i.values.value("options")}),value:t,viewProps:r.viewProps});var o=(e="format"in r.params?r.params.format:void 0)!==null&&e!==void 0?e:(0,Rr.createNumberFormatter)((0,je.getSuitableDecimalDigits)(n,t.rawValue)),a=n&&(0,Vt.findConstraint)(n,gi.DefiniteRangeConstraint);return a?new s_.SliderTextController(r.document,{baseStep:(0,je.getBaseStep)(n),parser:Rr.parseNumber,sliderProps:new Ar.ValueMap({maxValue:a.values.value("max"),minValue:a.values.value("min")}),textProps:Ar.ValueMap.fromObject({draggingScale:(0,je.getSuitableDraggingScale)(n,t.rawValue),formatter:o}),value:t,viewProps:r.viewProps}):new l_.NumberTextController(r.document,{baseStep:(0,je.getBaseStep)(n),parser:Rr.parseNumber,props:Ar.ValueMap.fromObject({draggingScale:(0,je.getSuitableDraggingScale)(n,t.rawValue),formatter:o}),value:t,viewProps:r.viewProps})}};var vr={},de={},c_=g&&g.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(de,"__esModule",{value:!0});de.Point2dAssembly=de.Point2d=void 0;var v_=E,pi=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=e,this.y=t}return r.prototype.getComponents=function(){return[this.x,this.y]},r.isObject=function(e){if((0,v_.isEmpty)(e))return!1;var t=e.x,n=e.y;return!(typeof t!="number"||typeof n!="number")},r.equals=function(e,t){return e.x===t.x&&e.y===t.y},r.prototype.toObject=function(){return{x:this.x,y:this.y}},r}();de.Point2d=pi;de.Point2dAssembly={toComponents:function(r){return r.getComponents()},fromComponents:function(r){return new(pi.bind.apply(pi,c_([void 0],r,!1)))}};var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.Point2dView=void 0;var h_=U,f_=D,__=O,m_=J,ze=(0,__.ClassName)("p2d"),b_=function(){function r(e,t){this.element=e.createElement("div"),this.element.classList.add(ze()),t.viewProps.bindClassModifiers(this.element),(0,f_.bindValue)(t.expanded,(0,m_.valueToClassName)(this.element,ze(void 0,"expanded")));var n=e.createElement("div");n.classList.add(ze("h")),this.element.appendChild(n);var i=e.createElement("button");i.classList.add(ze("b")),i.appendChild((0,h_.createSvgIconElement)(e,"p2dpad")),t.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;var o=e.createElement("div");if(o.classList.add(ze("t")),n.appendChild(o),this.textElement=o,t.pickerLayout==="inline"){var a=e.createElement("div");a.classList.add(ze("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}return r}();Cn.Point2dView=b_;var Pn={},En={};Object.defineProperty(En,"__esModule",{value:!0});En.Point2dPickerView=void 0;var Nr=U,Io=k,w_=O,be=(0,w_.ClassName)("p2dp"),g_=function(){function r(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=t.invertsY,this.maxValue_=t.maxValue,this.element=e.createElement("div"),this.element.classList.add(be()),t.layout==="popup"&&this.element.classList.add(be(void 0,"p")),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(be("p")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;var i=e.createElementNS(Nr.SVG_NS,"svg");i.classList.add(be("g")),this.padElement.appendChild(i),this.svgElem_=i;var o=e.createElementNS(Nr.SVG_NS,"line");o.classList.add(be("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);var a=e.createElementNS(Nr.SVG_NS,"line");a.classList.add(be("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);var l=e.createElementNS(Nr.SVG_NS,"line");l.classList.add(be("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;var s=e.createElement("div");s.classList.add(be("m")),this.padElement.appendChild(s),this.markerElem_=s,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return Object.defineProperty(r.prototype,"allFocusableElements",{get:function(){return[this.padElement]},enumerable:!1,configurable:!0}),r.prototype.update_=function(){var e=this.value.rawValue.getComponents(),t=e[0],n=e[1],i=this.maxValue_,o=(0,Io.mapRange)(t,-i,+i,0,100),a=(0,Io.mapRange)(n,-i,+i,0,100),l=this.invertsY_?100-a:a;this.lineElem_.setAttributeNS(null,"x2","".concat(o,"%")),this.lineElem_.setAttributeNS(null,"y2","".concat(l,"%")),this.markerElem_.style.left="".concat(o,"%"),this.markerElem_.style.top="".concat(l,"%")},r.prototype.onValueChange_=function(){this.update_()},r.prototype.onFoldableChange_=function(){this.update_()},r}();En.Point2dPickerView=g_;Object.defineProperty(Pn,"__esModule",{value:!0});Pn.Point2dPickerController=void 0;var Ko=k,Pt=K,y_=ne,Uo=de,C_=En;function Ho(r,e,t){return[(0,Pt.getStepForKey)(e[0],(0,Pt.getHorizontalStepKeys)(r)),(0,Pt.getStepForKey)(e[1],(0,Pt.getVerticalStepKeys)(r))*(t?1:-1)]}var P_=function(){function r(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.baseSteps_=t.baseSteps,this.maxValue_=t.maxValue,this.invertsY_=t.invertsY,this.view=new C_.Point2dPickerView(e,{invertsY:this.invertsY_,layout:t.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new y_.PointerHandler(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}return r.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=this.maxValue_,i=(0,Ko.mapRange)(e.point.x,0,e.bounds.width,-n,+n),o=(0,Ko.mapRange)(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new Uo.Point2d(i,o),t)}},r.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},r.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},r.prototype.onPadKeyDown_=function(e){(0,Pt.isArrowKey)(e.key)&&e.preventDefault();var t=Ho(e,this.baseSteps_,this.invertsY_),n=t[0],i=t[1];n===0&&i===0||this.value.setRawValue(new Uo.Point2d(this.value.rawValue.x+n,this.value.rawValue.y+i),{forceEmit:!1,last:!1})},r.prototype.onPadKeyUp_=function(e){var t=Ho(e,this.baseSteps_,this.invertsY_),n=t[0],i=t[1];n===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},r}();Pn.Point2dPickerController=P_;Object.defineProperty(vr,"__esModule",{value:!0});vr.Point2dController=void 0;var Go=W,E_=lt,qo=U,V_=he,S_=E,O_=Ue,M_=de,x_=Cn,$_=Pn,k_=function(){function r(e,t){var n=this,i,o;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Go.Foldable.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new E_.PopupController(e,{viewProps:this.viewProps}):null;var a=new $_.Point2dPickerController(e,{baseSteps:[t.axes[0].baseStep,t.axes[1].baseStep],invertsY:t.invertsY,layout:t.pickerLayout,maxValue:t.maxValue,value:this.value,viewProps:this.viewProps});a.view.allFocusableElements.forEach(function(l){l.addEventListener("blur",n.onPopupChildBlur_),l.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=a,this.textC_=new O_.PointNdTextController(e,{assembly:M_.Point2dAssembly,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new x_.Point2dView(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(o=this.view.buttonElement)===null||o===void 0||o.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),(0,V_.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(l){return l.rawValue},backward:function(l,s){return s.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,Go.bindFoldable)(this.foldable_,this.view.pickerElement))}return r.prototype.onPadButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,S_.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},r.prototype.onPadButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},r.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,qo.findNextTarget)(e);n&&t.contains(n)||n&&n===this.view.buttonElement&&!(0,qo.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},r.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()},r}();vr.Point2dController=k_;var pe={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.writePoint2d=Xe.point2dFromUnknown=void 0;var ei=de;function T_(r){return ei.Point2d.isObject(r)?new ei.Point2d(r.x,r.y):new ei.Point2d}Xe.point2dFromUnknown=T_;function j_(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y)}Xe.writePoint2d=j_;var zo;function Vn(){if(zo)return pe;zo=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.Point2dInputPlugin=pe.getSuitableMaxValue=pe.createDimensionConstraint=void 0;var r=re,e=F,t=T,n=L,i=Z,o=j,a=al(),l=Ke,s=te,p=vr,m=Xe,c=de;function d(_,y){if(_){var M=[],S=(0,s.createStepConstraint)(_,y);S&&M.push(S);var R=(0,s.createRangeConstraint)(_);return R&&M.push(R),new r.CompositeConstraint(M)}}pe.createDimensionConstraint=d;function w(_,y){return new l.PointNdConstraint({assembly:c.Point2dAssembly,components:[d("x"in _?_.x:void 0,y.x),d("y"in _?_.y:void 0,y.y)]})}function C(_,y){var M=_?(0,s.findNumberRange)(_):[],S=M[0],R=M[1];if(!(0,a.isEmpty)(S)||!(0,a.isEmpty)(R))return Math.max(Math.abs(S??0),Math.abs(R??0));var ie=(0,o.getBaseStep)(_);return Math.max(Math.abs(ie)*10,Math.abs(y)*10)}function P(_,y){var M=y instanceof l.PointNdConstraint?y.components[0]:void 0,S=y instanceof l.PointNdConstraint?y.components[1]:void 0,R=C(M,_.x),ie=C(S,_.y);return Math.max(R,ie)}pe.getSuitableMaxValue=P;function f(_,y){return{baseStep:(0,o.getBaseStep)(y),constraint:y,textProps:t.ValueMap.fromObject({draggingScale:(0,o.getSuitableDraggingScale)(y,_),formatter:(0,e.createNumberFormatter)((0,o.getSuitableDecimalDigits)(y,_))})}}function b(_){if(!("y"in _))return!1;var y=_.y;return y&&"inverted"in y?!!y.inverted:!1}return pe.Point2dInputPlugin={id:"input-point2d",type:"input",accept:function(_,y){if(!c.Point2d.isObject(_))return null;var M=n.ParamsParsers,S=(0,n.parseParams)(y,{expanded:M.optional.boolean,picker:M.optional.custom(o.parsePickerLayout),x:M.optional.custom(o.parsePointDimensionParams),y:M.optional.object({inverted:M.optional.boolean,max:M.optional.number,min:M.optional.number,step:M.optional.number})});return S?{initialValue:_,params:S}:null},binding:{reader:function(_){return m.point2dFromUnknown},constraint:function(_){return w(_.params,_.initialValue)},equals:c.Point2d.equals,writer:function(_){return m.writePoint2d}},controller:function(_){var y=_.document,M=_.value,S=_.constraint;if(!(S instanceof l.PointNdConstraint))throw i.TpError.shouldNeverHappen();var R="expanded"in _.params?_.params.expanded:void 0,ie="picker"in _.params?_.params.picker:void 0;return new p.Point2dController(y,{axes:[f(M.rawValue.x,S.components[0]),f(M.rawValue.y,S.components[1])],expanded:R??!1,invertsY:b(_.params),maxValue:P(M.rawValue,S),parser:e.parseNumber,pickerLayout:ie??"popup",value:M,viewProps:_.viewProps})}},pe}var bt={},Je={},Ae={},R_=g&&g.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.Point3dAssembly=Ae.Point3d=void 0;var A_=E,di=function(){function r(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.z=n}return r.prototype.getComponents=function(){return[this.x,this.y,this.z]},r.isObject=function(e){if((0,A_.isEmpty)(e))return!1;var t=e.x,n=e.y,i=e.z;return!(typeof t!="number"||typeof n!="number"||typeof i!="number")},r.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},r.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z}},r}();Ae.Point3d=di;Ae.Point3dAssembly={toComponents:function(r){return r.getComponents()},fromComponents:function(r){return new(di.bind.apply(di,R_([void 0],r,!1)))}};Object.defineProperty(Je,"__esModule",{value:!0});Je.writePoint3d=Je.point3dFromUnknown=void 0;var ti=Ae;function N_(r){return ti.Point3d.isObject(r)?new ti.Point3d(r.x,r.y,r.z):new ti.Point3d}Je.point3dFromUnknown=N_;function L_(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y),r.writeProperty("z",e.z)}Je.writePoint3d=L_;var Wo;function Za(){if(Wo)return bt;Wo=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.Point3dInputPlugin=void 0;var r=F,e=T,t=L,n=Z,i=j,o=Ke,a=Ue,l=Vn(),s=Je,p=Ae;function m(d,w){return new o.PointNdConstraint({assembly:p.Point3dAssembly,components:[(0,l.createDimensionConstraint)("x"in d?d.x:void 0,w.x),(0,l.createDimensionConstraint)("y"in d?d.y:void 0,w.y),(0,l.createDimensionConstraint)("z"in d?d.z:void 0,w.z)]})}function c(d,w){return{baseStep:(0,i.getBaseStep)(w),constraint:w,textProps:e.ValueMap.fromObject({draggingScale:(0,i.getSuitableDraggingScale)(w,d),formatter:(0,r.createNumberFormatter)((0,i.getSuitableDecimalDigits)(w,d))})}}return bt.Point3dInputPlugin={id:"input-point3d",type:"input",accept:function(d,w){if(!p.Point3d.isObject(d))return null;var C=t.ParamsParsers,P=(0,t.parseParams)(w,{x:C.optional.custom(i.parsePointDimensionParams),y:C.optional.custom(i.parsePointDimensionParams),z:C.optional.custom(i.parsePointDimensionParams)});return P?{initialValue:d,params:P}:null},binding:{reader:function(d){return s.point3dFromUnknown},constraint:function(d){return m(d.params,d.initialValue)},equals:p.Point3d.equals,writer:function(d){return s.writePoint3d}},controller:function(d){var w=d.value,C=d.constraint;if(!(C instanceof o.PointNdConstraint))throw n.TpError.shouldNeverHappen();return new a.PointNdTextController(d.document,{assembly:p.Point3dAssembly,axes:[c(w.rawValue.x,C.components[0]),c(w.rawValue.y,C.components[1]),c(w.rawValue.z,C.components[2])],parser:r.parseNumber,value:w,viewProps:d.viewProps})}},bt}var wt={},Ze={},Ne={},B_=g&&g.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.Point4dAssembly=Ne.Point4d=void 0;var F_=E,ci=function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=e,this.y=t,this.z=n,this.w=i}return r.prototype.getComponents=function(){return[this.x,this.y,this.z,this.w]},r.isObject=function(e){if((0,F_.isEmpty)(e))return!1;var t=e.x,n=e.y,i=e.z,o=e.w;return!(typeof t!="number"||typeof n!="number"||typeof i!="number"||typeof o!="number")},r.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},r.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z,w:this.w}},r}();Ne.Point4d=ci;Ne.Point4dAssembly={toComponents:function(r){return r.getComponents()},fromComponents:function(r){return new(ci.bind.apply(ci,B_([void 0],r,!1)))}};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.writePoint4d=Ze.point4dFromUnknown=void 0;var ri=Ne;function D_(r){return ri.Point4d.isObject(r)?new ri.Point4d(r.x,r.y,r.z,r.w):new ri.Point4d}Ze.point4dFromUnknown=D_;function I_(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y),r.writeProperty("z",e.z),r.writeProperty("w",e.w)}Ze.writePoint4d=I_;var Yo;function Qa(){if(Yo)return wt;Yo=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.Point4dInputPlugin=void 0;var r=F,e=T,t=L,n=Z,i=j,o=Ke,a=Ue,l=Vn(),s=Ze,p=Ne;function m(d,w){return new o.PointNdConstraint({assembly:p.Point4dAssembly,components:[(0,l.createDimensionConstraint)("x"in d?d.x:void 0,w.x),(0,l.createDimensionConstraint)("y"in d?d.y:void 0,w.y),(0,l.createDimensionConstraint)("z"in d?d.z:void 0,w.z),(0,l.createDimensionConstraint)("w"in d?d.w:void 0,w.w)]})}function c(d,w){return{baseStep:(0,i.getBaseStep)(w),constraint:w,textProps:e.ValueMap.fromObject({draggingScale:(0,i.getSuitableDraggingScale)(w,d),formatter:(0,r.createNumberFormatter)((0,i.getSuitableDecimalDigits)(w,d))})}}return wt.Point4dInputPlugin={id:"input-point4d",type:"input",accept:function(d,w){if(!p.Point4d.isObject(d))return null;var C=t.ParamsParsers,P=(0,t.parseParams)(w,{x:C.optional.custom(i.parsePointDimensionParams),y:C.optional.custom(i.parsePointDimensionParams),z:C.optional.custom(i.parsePointDimensionParams),w:C.optional.custom(i.parsePointDimensionParams)});return P?{initialValue:d,params:P}:null},binding:{reader:function(d){return s.point4dFromUnknown},constraint:function(d){return m(d.params,d.initialValue)},equals:p.Point4d.equals,writer:function(d){return s.writePoint4d}},controller:function(d){var w=d.value,C=d.constraint;if(!(C instanceof o.PointNdConstraint))throw n.TpError.shouldNeverHappen();return new a.PointNdTextController(d.document,{assembly:p.Point4dAssembly,axes:w.rawValue.getComponents().map(function(P,f){return c(P,C.components[f])}),parser:r.parseNumber,value:w,viewProps:d.viewProps})}},wt}var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.StringInputPlugin=void 0;var el=re,K_=Me,U_=De,H_=st,Xo=Ee,Jo=T,Zo=L,G_=xe,tl=j;function q_(r){var e=[],t=(0,tl.createListConstraint)(r.options);return t&&e.push(t),new el.CompositeConstraint(e)}hr.StringInputPlugin={id:"input-string",type:"input",accept:function(r,e){if(typeof r!="string")return null;var t=Zo.ParamsParsers,n=(0,Zo.parseParams)(e,{options:t.optional.custom(tl.parseListOptions)});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return Xo.stringFromUnknown},constraint:function(r){return q_(r.params)},writer:function(r){return G_.writePrimitive}},controller:function(r){var e=r.document,t=r.value,n=r.constraint,i=n&&(0,el.findConstraint)(n,K_.ListConstraint);return i?new U_.ListController(e,{props:new Jo.ValueMap({options:i.values.value("options")}),value:t,viewProps:r.viewProps}):new H_.TextController(e,{parser:function(o){return o},props:Jo.ValueMap.fromObject({formatter:Xo.formatString}),value:t,viewProps:r.viewProps})}};var $e={};Object.defineProperty($e,"__esModule",{value:!0});$e.Constants=void 0;$e.Constants={monitor:{defaultInterval:200,defaultLineCount:3}};var fr={},He={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.MultiLogView=void 0;var z_=O,Qo=(0,z_.ClassName)("mll"),W_=function(){function r(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Qo()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("textarea");n.classList.add(Qo("i")),n.style.height="calc(var(--bld-us) * ".concat(t.lineCount,")"),n.readOnly=!0,t.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return r.prototype.update_=function(){var e=this,t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,i=[];this.value.rawValue.forEach(function(o){o!==void 0&&i.push(e.formatter_(o))}),t.textContent=i.join(`
`),n&&(t.scrollTop=t.scrollHeight)},r.prototype.onValueUpdate_=function(){this.update_()},r}();Sn.MultiLogView=W_;Object.defineProperty(He,"__esModule",{value:!0});He.MultiLogController=void 0;var Y_=Sn,X_=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Y_.MultiLogView(e,{formatter:t.formatter,lineCount:t.lineCount,value:this.value,viewProps:this.viewProps})}return r}();He.MultiLogController=X_;var Ge={},On={};Object.defineProperty(On,"__esModule",{value:!0});On.SingleLogView=void 0;var J_=O,ea=(0,J_.ClassName)("sgl"),Z_=function(){function r(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(ea()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(ea("i")),n.readOnly=!0,n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return r.prototype.update_=function(){var e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""},r.prototype.onValueUpdate_=function(){this.update_()},r}();On.SingleLogView=Z_;Object.defineProperty(Ge,"__esModule",{value:!0});Ge.SingleLogController=void 0;var Q_=On,em=function(){function r(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Q_.SingleLogView(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}return r}();Ge.SingleLogController=em;Object.defineProperty(fr,"__esModule",{value:!0});fr.BooleanMonitorPlugin=void 0;var ni=ae,ta=L,tm=$e,rm=He,nm=Ge;fr.BooleanMonitorPlugin={id:"monitor-bool",type:"monitor",accept:function(r,e){if(typeof r!="boolean")return null;var t=ta.ParamsParsers,n=(0,ta.parseParams)(e,{lineCount:t.optional.number});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return ni.boolFromUnknown}},controller:function(r){var e;return r.value.rawValue.length===1?new nm.SingleLogController(r.document,{formatter:ni.BooleanFormatter,value:r.value,viewProps:r.viewProps}):new rm.MultiLogController(r.document,{formatter:ni.BooleanFormatter,lineCount:(e=r.params.lineCount)!==null&&e!==void 0?e:tm.Constants.monitor.defaultLineCount,value:r.value,viewProps:r.viewProps})}};var _r={},Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.GraphLogView=void 0;var ii=U,Lr=k,rl=O,we=(0,rl.ClassName)("grl"),im=function(){function r(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(we()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var n=e.createElementNS(ii.SVG_NS,"svg");n.classList.add(we("g")),n.style.height="calc(var(--bld-us) * ".concat(t.lineCount,")"),this.element.appendChild(n),this.svgElem_=n;var i=e.createElementNS(ii.SVG_NS,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;var o=e.createElement("div");o.classList.add(we("t"),(0,rl.ClassName)("tt")()),this.element.appendChild(o),this.tooltipElem_=o,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return Object.defineProperty(r.prototype,"graphElement",{get:function(){return this.svgElem_},enumerable:!1,configurable:!0}),r.prototype.update_=function(){var e=this.svgElem_.getBoundingClientRect(),t=this.value.rawValue.length-1,n=this.props_.get("minValue"),i=this.props_.get("maxValue"),o=[];this.value.rawValue.forEach(function(m,c){if(m!==void 0){var d=(0,Lr.mapRange)(c,0,t,0,e.width),w=(0,Lr.mapRange)(m,n,i,e.height,0);o.push([d,w].join(","))}}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));var a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){a.classList.remove(we("t","a"));return}var s=(0,Lr.mapRange)(this.cursor_.rawValue,0,t,0,e.width),p=(0,Lr.mapRange)(l,n,i,e.height,0);a.style.left="".concat(s,"px"),a.style.top="".concat(p,"px"),a.textContent="".concat(this.formatter_(l)),a.classList.contains(we("t","a"))||(a.classList.add(we("t","a"),we("t","in")),(0,ii.forceReflow)(a),a.classList.remove(we("t","in")))},r.prototype.onValueUpdate_=function(){this.update_()},r.prototype.onCursorChange_=function(){this.update_()},r}();Mn.GraphLogView=im;Object.defineProperty(_r,"__esModule",{value:!0});_r.GraphLogController=void 0;var om=U,am=G,ra=k,lm=ne,sm=Mn,um=function(){function r(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=(0,am.createValue)(-1),this.view=new sm.GraphLogView(e,{cursor:this.cursor_,formatter:t.formatter,lineCount:t.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!(0,om.supportsTouch)(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{var n=new lm.PointerHandler(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}}return r.prototype.onGraphMouseLeave_=function(){this.cursor_.rawValue=-1},r.prototype.onGraphMouseMove_=function(e){var t=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor((0,ra.mapRange)(e.offsetX,0,t.width,0,this.value.rawValue.length))},r.prototype.onGraphPointerDown_=function(e){this.onGraphPointerMove_(e)},r.prototype.onGraphPointerMove_=function(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor((0,ra.mapRange)(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))},r.prototype.onGraphPointerUp_=function(){this.cursor_.rawValue=-1},r}();_r.GraphLogController=um;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.NumberMonitorPlugin=void 0;var nl=F,pm=T,na=L,il=$e,dm=E,cm=He,vm=Ge,hm=_r;function vi(r){return"format"in r&&!(0,dm.isEmpty)(r.format)?r.format:(0,nl.createNumberFormatter)(2)}function fm(r){var e;return r.value.rawValue.length===1?new vm.SingleLogController(r.document,{formatter:vi(r.params),value:r.value,viewProps:r.viewProps}):new cm.MultiLogController(r.document,{formatter:vi(r.params),lineCount:(e=r.params.lineCount)!==null&&e!==void 0?e:il.Constants.monitor.defaultLineCount,value:r.value,viewProps:r.viewProps})}function _m(r){var e,t,n;return new hm.GraphLogController(r.document,{formatter:vi(r.params),lineCount:(e=r.params.lineCount)!==null&&e!==void 0?e:il.Constants.monitor.defaultLineCount,props:pm.ValueMap.fromObject({maxValue:(t="max"in r.params?r.params.max:null)!==null&&t!==void 0?t:100,minValue:(n="min"in r.params?r.params.min:null)!==null&&n!==void 0?n:0}),value:r.value,viewProps:r.viewProps})}function ia(r){return"view"in r&&r.view==="graph"}mr.NumberMonitorPlugin={id:"monitor-number",type:"monitor",accept:function(r,e){if(typeof r!="number")return null;var t=na.ParamsParsers,n=(0,na.parseParams)(e,{format:t.optional.function,lineCount:t.optional.number,max:t.optional.number,min:t.optional.number,view:t.optional.string});return n?{initialValue:r,params:n}:null},binding:{defaultBufferSize:function(r){return ia(r)?64:1},reader:function(r){return nl.numberFromUnknown}},controller:function(r){return ia(r.params)?_m(r):fm(r)}};var br={};Object.defineProperty(br,"__esModule",{value:!0});br.StringMonitorPlugin=void 0;var oi=Ee,oa=L,mm=$e,bm=He,wm=Ge;br.StringMonitorPlugin={id:"monitor-string",type:"monitor",accept:function(r,e){if(typeof r!="string")return null;var t=oa.ParamsParsers,n=(0,oa.parseParams)(e,{lineCount:t.optional.number,multiline:t.optional.boolean});return n?{initialValue:r,params:n}:null},binding:{reader:function(r){return oi.stringFromUnknown}},controller:function(r){var e,t=r.value,n=t.rawValue.length>1||"multiline"in r.params&&r.params.multiline;return n?new bm.MultiLogController(r.document,{formatter:oi.formatString,lineCount:(e=r.params.lineCount)!==null&&e!==void 0?e:mm.Constants.monitor.defaultLineCount,value:t,viewProps:r.viewProps}):new wm.SingleLogController(r.document,{formatter:oi.formatString,value:t,viewProps:r.viewProps})}};var ol={};Object.defineProperty(ol,"__esModule",{value:!0});var gt={},wr={},xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.createInputBindingController=void 0;var gm=Ve,ym=Se,Cm=Xt,Pm=T,Em=G,Vm=ve,Sm=L,Om=E;function Mm(r,e){var t,n=r.accept(e.target.read(),e.params);if((0,Om.isEmpty)(n))return null;var i=Sm.ParamsParsers,o={target:e.target,initialValue:n.initialValue,params:n.params},a=r.binding.reader(o),l=r.binding.constraint?r.binding.constraint(o):void 0,s=(0,Em.createValue)(a(n.initialValue),{constraint:l,equals:r.binding.equals}),p=new Cm.InputBinding({reader:a,target:e.target,value:s,writer:r.binding.writer(o)}),m=i.optional.boolean(e.params.disabled).value,c=i.optional.boolean(e.params.hidden).value,d=r.controller({constraint:l,document:e.document,initialValue:n.initialValue,params:n.params,value:p.value,viewProps:Vm.ViewProps.create({disabled:m,hidden:c})});return new ym.InputBindingController(e.document,{binding:p,blade:(0,gm.createBlade)(),props:Pm.ValueMap.fromObject({label:"label"in e.params?(t=i.optional.string(e.params.label).value)!==null&&t!==void 0?t:null:e.target.key}),valueController:d})}xn.createInputBindingController=Mm;var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.createMonitorBindingController=void 0;var xm=Ve,$m=Oe,km=Jt,Tm=Yt,jm=Wt,Rm=Pe,Am=T,Nm=ve,Lm=L,Bm=$e,Fm=E;function Dm(r,e){return e===0?new jm.ManualTicker:new Tm.IntervalTicker(r,e??Bm.Constants.monitor.defaultInterval)}function Im(r,e){var t,n,i,o=Lm.ParamsParsers,a=r.accept(e.target.read(),e.params);if((0,Fm.isEmpty)(a))return null;var l={target:e.target,initialValue:a.initialValue,params:a.params},s=r.binding.reader(l),p=(n=(t=o.optional.number(e.params.bufferSize).value)!==null&&t!==void 0?t:r.binding.defaultBufferSize&&r.binding.defaultBufferSize(a.params))!==null&&n!==void 0?n:1,m=o.optional.number(e.params.interval).value,c=new km.MonitorBinding({reader:s,target:e.target,ticker:Dm(e.document,m),value:(0,Rm.initializeBuffer)(p)}),d=o.optional.boolean(e.params.disabled).value,w=o.optional.boolean(e.params.hidden).value,C=r.controller({document:e.document,params:a.params,value:c.value,viewProps:Nm.ViewProps.create({disabled:d,hidden:w})});return new $m.MonitorBindingController(e.document,{binding:c,blade:(0,xm.createBlade)(),props:Am.ValueMap.fromObject({label:"label"in e.params?(i=o.optional.string(e.params.label).value)!==null&&i!==void 0?i:null:e.target.key}),valueController:C})}$n.createMonitorBindingController=Im;var ai=g&&g.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(wr,"__esModule",{value:!0});wr.PluginPool=void 0;var Km=rt,Um=Se,Hm=nt,Gm=Oe,qm=zt,zm=Ce,Wm=Nt(),yt=Z,Ym=xn,Xm=E,Jm=$n,Zm=function(){function r(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}return r.prototype.getAll=function(){return ai(ai(ai([],this.pluginsMap_.blades,!0),this.pluginsMap_.inputs,!0),this.pluginsMap_.monitors,!0)},r.prototype.register=function(e){e.type==="blade"?this.pluginsMap_.blades.unshift(e):e.type==="input"?this.pluginsMap_.inputs.unshift(e):e.type==="monitor"&&this.pluginsMap_.monitors.unshift(e)},r.prototype.createInput=function(e,t,n){var i=t.read();if((0,Xm.isEmpty)(i))throw new yt.TpError({context:{key:t.key},type:"nomatchingcontroller"});var o=this.pluginsMap_.inputs.reduce(function(a,l){return a??(0,Ym.createInputBindingController)(l,{document:e,target:t,params:n})},null);if(o)return o;throw new yt.TpError({context:{key:t.key},type:"nomatchingcontroller"})},r.prototype.createMonitor=function(e,t,n){var i=this.pluginsMap_.monitors.reduce(function(o,a){return o??(0,Jm.createMonitorBindingController)(a,{document:e,params:n,target:t})},null);if(i)return i;throw new yt.TpError({context:{key:t.key},type:"nomatchingcontroller"})},r.prototype.createBlade=function(e,t){var n=this.pluginsMap_.blades.reduce(function(i,o){return i??(0,qm.createBladeController)(o,{document:e,params:t})},null);if(!n)throw new yt.TpError({type:"nomatchingview",context:{params:t}});return n},r.prototype.createBladeApi=function(e){var t=this;if(e instanceof Um.InputBindingController)return new Km.InputBindingApi(e);if(e instanceof Gm.MonitorBindingController)return new Hm.MonitorBindingApi(e);if(e instanceof Wm.RackController)return new zm.RackApi(e,this);var n=this.pluginsMap_.blades.reduce(function(i,o){return i??o.api({controller:e,pool:t})},null);if(!n)throw yt.TpError.shouldNeverHappen();return n},r}();wr.PluginPool=Zm;var aa;function Qm(){if(aa)return gt;aa=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.createDefaultPluginPool=void 0;var r=kt,e=Ft,t=Kt,n=qt,i=ur,o=pr,a=dr,l=cr,s=te,p=Vn(),m=Za(),c=Qa(),d=hr,w=fr,C=mr,P=br,f=wr;function b(){var _=new f.PluginPool;return[p.Point2dInputPlugin,m.Point3dInputPlugin,c.Point4dInputPlugin,d.StringInputPlugin,s.NumberInputPlugin,l.StringColorInputPlugin,a.ObjectColorInputPlugin,o.NumberColorInputPlugin,i.BooleanInputPlugin,w.BooleanMonitorPlugin,P.StringMonitorPlugin,C.NumberMonitorPlugin,r.ButtonBladePlugin,e.FolderBladePlugin,t.SeparatorBladePlugin,n.TabBladePlugin].forEach(function(y){_.register(y)}),_}return gt.createDefaultPluginPool=b,gt}var la;function al(){return la||(la=1,function(r){var e=g&&g.__createBinding||(Object.create?function(i,o,a,l){l===void 0&&(l=a);var s=Object.getOwnPropertyDescriptor(o,a);(!s||("get"in s?!o.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,l,s)}:function(i,o,a,l){l===void 0&&(l=a),i[l]=o[a]}),t=g&&g.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,i,a)};Object.defineProperty(r,"__esModule",{value:!0}),r.createBladeController=void 0,t(se,r),t(da,r),t(ca,r),t(I,r),t(Ot,r),t(Mt,r),t(xt,r),t($t,r),t(kt,r),t(ce,r),t(Be,r),t(Tt,r),t(Ve,r),t(W,r),t(jt,r),t(Rt,r),t(Lt,r),t(Ft,r),t(rt,r),t(Se,r),t(Le,r),t(Qr,r),t(Qe,r),t(nt,r),t(Oe,r),t(Dt,r),t(It,r),t(Kt,r),t(Ut,r),t(Ht,r),t(Gt,r),t(ot,r),t(qt,r);var n=zt;Object.defineProperty(r,"createBladeController",{enumerable:!0,get:function(){return n.createBladeController}}),t(Wt,r),t(Yt,r),t(ba,r),t(Xt,r),t(Jt,r),t(re,r),t(ya,r),t(Fe,r),t(Me,r),t(Zt,r),t(at,r),t(Ca,r),t(De,r),t(lt,r),t(st,r),t(Pa,r),t(ae,r),t(Va,r),t(F,r),t($a,r),t(rr,r),t(Ee,r),t(Pe,r),t(N,r),t(D,r),t(ka,r),t(T,r),t(he,r),t(G,r),t(ve,r),t(fe,r),t(ir,r),t(ar,r),t(nr,r),t(or,r),t(lr,r),t(O,r),t(Qt,r),t(At,r),t(ne,r),t(er,r),t(J,r),t(tr,r),t(Ra,r),t(ye,r),t(U,r),t(k,r),t(L,r),t(Aa,r),t(xe,r),t(Z,r),t(K,r),t(j,r),t(sr,r),t(ur,r),t(Ie,r),t(B,r),t(_e,r),t(q,r),t(pr,r),t(dr,r),t(cr,r),t(Ke,r),t(Ue,r),t(te,r),t(vr,r),t(Vn(),r),t(Za(),r),t(Qa(),r),t(hr,r),t($e,r),t(E,r),t(fr,r),t(He,r),t(Ge,r),t(_r,r),t(mr,r),t(br,r),t(ol,r),t(Qm(),r),t(wr,r)}(Bn)),Bn}var eb=al();function tb(r,e,t){const[n,i]=x.useState(e.value),o=x.useRef(null),a=x.useRef(t);a.current=t,x.useEffect(()=>{const p=o.current;p&&(p.disabled=!!e.disabled,p.hidden=!!e.hidden,p.label=e.label,p.value=e.value)},[e.disabled,e.hidden,e.label,e.value]),x.useEffect(()=>{const p=o.current;p!=null&&(p.options=eb.normalizeListOptions(e.options))},[JSON.stringify(e.options)]);const l=x.useCallback(p=>{o.current.value=p},[]),s=t?p=>a.current(p):p=>i(p.value);return x.useLayoutEffect(()=>{const p=r.current.instance;if(p==null)return;e.view=e.view||"list";const m=p.addBlade(e);return m.on("change",s),o.current=m,()=>{m.element&&m.dispose()}},[]),[t?void 0:n,l,o]}function rb(r,e,t){const[n,i]=x.useState(e.value),o=x.useRef(null),a=x.useRef(t);a.current=t,x.useEffect(()=>{const s=o.current;s!=null&&(s.disabled=!!e.disabled,s.hidden=!!e.hidden,s.label=e.label,s.value=e.value,s.formatter=e.format)},[e.disabled,e.hidden,e.label,e.value]);const l=x.useCallback(s=>{o.current.value=s},[]);return x.useLayoutEffect(()=>{const s=r.current.instance;if(s==null)return;e.view=e.view||"text";const p=s.addBlade(e),m=t?c=>a.current(c):c=>i(c.value);return p.on("change",m),o.current=p,()=>{p.element&&p.dispose()}},[]),[t?void 0:n,l,o]}function sa(r,e,t){const[n,i]=x.useState(e.value||0),o=x.useRef(null),a=x.useRef(t);a.current=t,x.useEffect(()=>{const s=o.current;s!=null&&(s.disabled=!!e.disabled,s.hidden=!!e.hidden,s.label=e.label,s.maxValue=e.max,s.minValue=e.min,s.value=e.value||0)},[e.disabled,e.hidden,e.label,e.value,e.max,e.min]);const l=x.useCallback(s=>{o.current.value=s},[]);return x.useLayoutEffect(()=>{const s=r.current.instance;if(s==null)return;e.view=e.view||"slider";const p=s.addBlade(e),m=t?c=>a.current(c):c=>i(c.value);return p.on("change",m),o.current=p,()=>{p.element&&p.dispose()}},[]),[t?void 0:n,l,o]}function nb(r,e){var n;const t=x.useRef({instance:null,params:((n=r.current)==null?void 0:n.params)||{}});return x.useEffect(()=>{const i=t.current.instance;i!=null&&(i.title=e.title,i.expanded=e.expanded??!0,i.disabled=!!e.disabled,i.hidden=!!e.hidden)},[e.disabled,e.expanded,e.title,e.hidden]),x.useLayoutEffect(()=>{var a,l;const i=(a=r.current)==null?void 0:a.instance;if(i==null)return;const o=i.addFolder(e);return t.current.instance=o,t.current.params=((l=r.current)==null?void 0:l.params)||{},()=>{o.element&&o.dispose()}},[]),t}function Br(r,e,t={},n=void 0){const i=typeof t=="function"?{}:t,o=typeof t=="function"?t:n,[a,l]=x.useState(r.current.params[e]),s=x.useRef(null),p=x.useRef(o);p.current=o;const m=x.useCallback(c=>{s.current.controller_.binding.target.write(c),s.current.refresh()},[]);return s.current&&(s.current.hidden=!!i.hidden,s.current.disabled=!!i.disabled),x.useLayoutEffect(()=>{var C;const c=(C=r.current)==null?void 0:C.instance;if(c==null)return;const d=o?P=>p.current(P):P=>l(P.value),w=c.addInput(r.current.params,e,i).on("change",d);return s.current=w,()=>{w.element&&w.dispose()}},[e,o]),[o==null?a:void 0,m,s]}function ib(r={},e={}){const t=x.useRef({instance:null,params:r});return x.useEffect(()=>{const n=t.current.instance;n!=null&&(n.title=e.title,n.expanded=e.expanded??!0,n.refresh())},[e.expanded,e.title]),x.useLayoutEffect(()=>{const n=new jl.Pane(e);return t.current.instance=n,()=>{t.current.instance=null,n.dispose()}},[]),t}function ob(){const r=x.useRef(null),e=ib({position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},color:"#ffa500"},{title:"Scene Settings"}),[t]=sa(e,{label:"Sky",value:.6,min:0,max:1,step:.01,format:l=>l.toFixed(2)}),[n]=sa(e,{label:"Ambient Light Intensity",index:0,value:.5,min:0,max:1,step:.01,format:l=>l.toFixed(2)}),[i]=rb(e,{label:"Title",value:"Hello World",parse:l=>l,format:l=>l}),[o]=tb(e,{label:"Fruit",options:[{text:"Apple 🍎",value:"🍎"},{text:"Orange 🍊",value:"🍊"},{text:"Banana 🍌",value:"🍌"}],value:"box",view:"list"}),a=nb(e,{title:"Box Settings"});return Br(a,"position",{label:"Pos",x:{min:-6,max:6},y:{min:-6,max:6},z:{min:-6,max:6}},l=>{const{x:s,y:p,z:m}=l.value;r.current.position.set(s,p,m)}),Br(a,"rotation",{label:"Rotation",x:{min:-180,max:180,step:18},y:{min:-180,max:180,step:18},z:{min:-180,max:180,step:18}},l=>{const{x:s,y:p,z:m}=l.value;r.current.rotation.setFromVector3(new $l(s,p,m).multiplyScalar(Math.PI/180))}),Br(a,"scale",{label:"Scale"},l=>{const{x:s,y:p,z:m}=l.value;r.current.scale.set(s,p,m)}),Br(a,"color",{label:"Color"},l=>{r.current.material.color.set(new kl(l.value))}),z.jsxs("div",{className:"app",children:[z.jsxs(Vl,{dpr:2,children:[z.jsx(Sl,{makeDefault:!0}),z.jsx(Ol,{makeDefault:!0,position:[0,0,4]}),z.jsx(Ml,{azimuth:1,inclination:t,distance:1e3}),z.jsx("ambientLight",{intensity:n}),z.jsx("pointLight",{position:[2,2,2]}),z.jsxs("mesh",{ref:r,children:[z.jsx("boxGeometry",{}),z.jsx("meshStandardMaterial",{color:"orange"})]}),z.jsx(xl,{})]}),z.jsx("div",{className:"tooltip",children:z.jsxs("h1",{children:[i," ",o]})})]})}Tl.createRoot(document.getElementById("root")).render(z.jsx(El.StrictMode,{children:z.jsx(ob,{})}));
